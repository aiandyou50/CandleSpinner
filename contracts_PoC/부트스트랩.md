***REMOVED***ğŸš€ CSPIN Withdrawal PoC - ë¶€íŠ¸ìŠ¤íŠ¸ë© ê°€ì´ë“œ

> **ìƒˆ ì„¸ì…˜ìš© ì»¨í…ìŠ¤íŠ¸ ë¬¸ì„œ**  
> ì´ ë¬¸ì„œë¥¼ ìƒˆ AI ì„¸ì…˜ì— ë³µì‚¬í•˜ì—¬ í”„ë¡œì íŠ¸ ìƒíƒœë¥¼ ì¦‰ì‹œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#***REMOVED***ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

##***REMOVED*****ëª©ì **
TON ë¸”ë¡ì²´ì¸ ê¸°ë°˜ **CSPIN í† í° Pull ë°©ì‹ ì¸ì¶œ ì‹œìŠ¤í…œ**  
ìŠ¬ë¡¯ë¨¸ì‹  ê²Œì„ ì‚¬ìš©ìê°€ ì›¹ í”„ë¡ íŠ¸ì—”ë“œë¥¼ í†µí•´ í† í°ì„ ì§ì ‘ ì¸ì¶œí•  ìˆ˜ ìˆëŠ” PoC

##***REMOVED*****í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ**
- **Blockchain**: TON (The Open Network)
- **Smart Contract**: Tact 1.6.13
- **Build Tool**: Blueprint (TON deployment framework)
- **Frontend**: HTML/JS + TonConnect UI + TonWeb 0.0.66
- **Wallet**: W5 version
- **Token**: CSPIN Jetton (TON's token standard)

##***REMOVED*****ë°°í¬ ìƒíƒœ**
- âœ… **Testnet**: `EQAIlrbypzom9HibUyYxosqmYnIRjFWAhFs5E1ybnKY2XtQg`
  - ë°°í¬ ì™„ë£Œ (2025-10-27)
  - Pause/Unpause í…ŒìŠ¤íŠ¸ ì™„ë£Œ
  - ë„¤íŠ¸ì›Œí¬ ê°ì§€ ê²€ì¦ ì™„ë£Œ
- â³ **Mainnet**: ë°°í¬ ëŒ€ê¸° ì¤‘
  - Owner: `UQBFPDdSlPgqPrn2XwhpVq0KQExN2kv83_batQ-dptaR8Mtd`
  - Jetton Master: `EQBZ6nHfmT2wct9d4MoOdNPzhtUGXOds1y3NTmYUFHAA3uvV`
  - Game Jetton Wallet: `EQAjtIvLT_y9GNBAikrD7ThH3f4BI-h_l_mz-Bhuc4_c7wOs`

---

#***REMOVED***ï¿½ ëª¨ë°”ì¼ ê¸´ê¸‰ ì •ì§€ ë°©ë²• (ì¤‘ìš”!)

PC í™˜ê²½ì´ ì•„ë‹ˆê±°ë‚˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì—ì„œë„ ê¸´ê¸‰ ì •ì§€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤:

##***REMOVED*****ë°©ë²• 1: Tonkeeper ëª¨ë°”ì¼ ì•± (ê°€ì¥ ê°„ë‹¨) âœ…**

1. **Tonkeeper ì•± ì—´ê¸°**
2. **ì „ì†¡(Send) íƒ­** ì„ íƒ
3. **ìˆ˜ì‹ ì**: ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ ì…ë ¥
   - Testnet: `EQAIlrbypzom9HibUyYxosqmYnIRjFWAhFs5E1ybnKY2XtQg`
   - Mainnet: (ë°°í¬ í›„ ì£¼ì†Œ)
4. **ê¸ˆì•¡**: `0.05 TON`
5. **ë©”ì‹œì§€(Comment)**: `pause` (ì •í™•íˆ ì†Œë¬¸ìë¡œ ì…ë ¥)
6. **ì „ì†¡** ë²„íŠ¼ í´ë¦­

**ì¬ê°œí•˜ë ¤ë©´ ë™ì¼í•˜ê²Œ `unpause` ë©”ì‹œì§€ ì „ì†¡**

##***REMOVED*****ë°©ë²• 2: ëª¨ë°”ì¼ ì›¹ ê¸´ê¸‰ ì •ì§€ í˜ì´ì§€ (ê¶Œì¥) â­**

```
frontend-poc/emergency-pause.html
```

**ì‚¬ìš©ë²•**:
1. ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì—ì„œ `emergency-pause.html` ì—´ê¸°
2. "Owner ì§€ê°‘ ì—°ê²°" ë²„íŠ¼ í´ë¦­
3. Tonkeeper/MyTonWallet ì•±ìœ¼ë¡œ QR ìŠ¤ìº”
4. "ê¸´ê¸‰ ì •ì§€" ë˜ëŠ” "ì¬ê°œ" ë²„íŠ¼ í´ë¦­

**ê¸°ëŠ¥**:
- âœ… Owner ìë™ ì¸ì¦
- âœ… ì‹¤ì‹œê°„ ì»¨íŠ¸ë™íŠ¸ ìƒíƒœ í‘œì‹œ
- âœ… ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì¦‰ì‹œ Pause/Unpause
- âœ… ì‘ì—… ë¡œê·¸ ì‹¤ì‹œê°„ í‘œì‹œ
- âœ… ëª¨ë°”ì¼ ìµœì í™” UI

##***REMOVED*****ë°©ë²• 3: TonHub ì•± (ê³ ê¸‰ ì‚¬ìš©ì)**

1. TonHub ì•± ì„¤ì¹˜
2. Owner ì§€ê°‘ ë¶ˆëŸ¬ì˜¤ê¸°
3. "Send Transaction" â†’ "Advanced"
4. Payload: `pause` ì…ë ¥
5. ì „ì†¡

##***REMOVED*****ë°©ë²• 4: PC Blueprint (ê¸°ë³¸)**

```powershell
***REMOVED***Pause
npx blueprint run pauseContract --mainnet

***REMOVED***Unpause
npx blueprint run unpauseContract --mainnet
```

---

#***REMOVED***ï¿½ğŸ” ë³´ì•ˆ ìƒíƒœ (Critical)

##***REMOVED*****ë¯¼ê° ì •ë³´ ë³´í˜¸ í˜„í™©**
- âœ… `.env`: Mnemonic ì œê±°ë¨ (ì£¼ì„ë§Œ ì¡´ì¬)
- âœ… `.gitignore`: `.env`, `*.key`, `*.pem` ì œì™¸ ì„¤ì •
- âœ… ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸: Mnemonic **ëŸ°íƒ€ì„ ì…ë ¥ë§Œ** í—ˆìš©
- âœ… Git ì»¤ë°‹ ì•ˆì „: ë¯¼ê° ì •ë³´ ë…¸ì¶œ ìœ„í—˜ ì—†ìŒ

##***REMOVED*****ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ë³´ì•ˆ ê¸°ëŠ¥**
1. **Reentrancy ë°©ì§€**: CEI íŒ¨í„´ (Check-Effects-Interactions)
2. **Access Control**: Owner ì „ìš© ê´€ë¦¬ ê¸°ëŠ¥
3. **Emergency Stop**: Pause/Unpause ê¸°ëŠ¥
4. **ìµœëŒ€ ì¸ì¶œ ì œí•œ**: 1,000,000 CSPIN (ìŠ¬ë¡¯ë¨¸ì‹  ì­íŒŸ ëŒ€ì‘)
5. **ìµœì†Œ ì”ì•¡ ë³´í˜¸**: 0.1 TON ìœ ì§€ (ì €ì¥ë£Œ)

---

#***REMOVED***ğŸ“ ì£¼ìš” íŒŒì¼ êµ¬ì¡°

```
contracts/
â”œâ”€â”€ sources/
â”‚   â”œâ”€â”€ CSPINWithdrawalSecure.tact      ***REMOVED***ë©”ì¸ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ (ë³´ì•ˆ ê°•í™”)
â”‚   â””â”€â”€ CSPINWithdrawal.tact            ***REMOVED***êµ¬ ë²„ì „ (ì‚¬ìš© ì•ˆ í•¨)
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploySecure.ts                 ***REMOVED***ë©”ì¸ë„·/í…ŒìŠ¤íŠ¸ë„· ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ deploySecureDirect.ts           ***REMOVED***Mnemonic ì§ì ‘ ì…ë ¥ ë°°í¬
â”‚   â”œâ”€â”€ setClaimable.ts                 ***REMOVED***ì‚¬ìš©ìì—ê²Œ ì¸ì¶œ ê¸ˆì•¡ ì„¤ì •
â”‚   â”œâ”€â”€ pauseContract.ts                ***REMOVED***ê¸´ê¸‰ ì •ì§€
â”‚   â”œâ”€â”€ unpauseContract.ts              ***REMOVED***ì¬ê°œ
â”‚   â””â”€â”€ withdrawTON.ts                  ***REMOVED***TON ìˆ˜ìˆ˜ë£Œ ì¸ì¶œ
â”œâ”€â”€ frontend-poc/
â”‚   â””â”€â”€ index.html                      ***REMOVED***ì‚¬ìš©ììš© ì¸ì¶œ ì›¹ ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ build/
â”‚   â””â”€â”€ CSPINWithdrawalSecure/          ***REMOVED***ì»´íŒŒì¼ëœ ì»¨íŠ¸ë™íŠ¸
â”‚       â”œâ”€â”€ *.abi, *.fc, *.ts           ***REMOVED***ìƒì„±ëœ íŒŒì¼ë“¤
â”‚       â””â”€â”€ *.compiled.json             ***REMOVED***ë°°í¬ìš© JSON
â”œâ”€â”€ .env                                ***REMOVED***í™˜ê²½ ë³€ìˆ˜ (Mnemonic ì œê±°ë¨)
â”œâ”€â”€ .env.example                        ***REMOVED***í…œí”Œë¦¿ (ì•ˆì „)
â”œâ”€â”€ .gitignore                          ***REMOVED***Git ë³´ì•ˆ ì„¤ì •
â””â”€â”€ README.md                           ***REMOVED***í”„ë¡œì íŠ¸ ë¬¸ì„œ
```

---

#***REMOVED***ğŸ’» ì£¼ìš” ì½”ë“œ ìŠ¤ë‹ˆí«

##***REMOVED*****1. ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ í•µì‹¬ (CSPINWithdrawalSecure.tact)**

```tact
contract CSPINWithdrawalSecure with Deployable, Ownable {
    owner: Address;
    jettonMaster: Address;
    gameJettonWallet: Address;
    paused: Bool;
    maxSingleWithdraw: Int;  // 1,000,000 CSPIN
    claimableAmounts: map<Address, Int>;

    init(owner: Address, jettonMaster: Address, gameJettonWallet: Address) {
        self.owner = owner;
        self.jettonMaster = jettonMaster;
        self.gameJettonWallet = gameJettonWallet;
        self.paused = false;
        self.maxSingleWithdraw = 1000000000000000;  // 1,000,000 CSPIN
        self.claimableAmounts = emptyMap();
    }

    // ê¸´ê¸‰ ì •ì§€ ê¸°ëŠ¥
    receive("pause") {
        self.requireOwner();
        self.paused = true;
    }

    receive("unpause") {
        self.requireOwner();
        self.paused = false;
    }

    // TON ì¸ì¶œ ê¸°ëŠ¥
    receive(msg: WithdrawTON) {
        self.requireOwner();
        let balance: Int = myBalance();
        let minBalance: Int = ton("0.1");
        require(balance >= minBalance + msg.amount, "Must keep min balance");
        send(SendParameters{
            to: self.owner,
            value: msg.amount,
            mode: SendPayGasSeparately,
            body: "TON withdrawal".asComment()
        });
    }

    // ì‚¬ìš©ì ì¸ì¶œ ê¸ˆì•¡ ì„¤ì •
    receive(msg: SetClaimable) {
        self.requireOwner();
        require(msg.amount >= 0, "Amount cannot be negative");
        self.claimableAmounts.set(msg.user, msg.amount);
    }

    // ì‚¬ìš©ì í† í° ì¸ì¶œ ìš”ì²­
    receive(msg: ClaimRequest) {
        require(!self.paused, "Contract is paused");
        
        let sender: Address = sender();
        let claimable: Int? = self.claimableAmounts.get(sender);
        require(claimable != null, "No claimable amount");
        
        let amount: Int = claimable!!;
        require(amount > 0, "Claimable amount is zero");
        require(amount <= self.maxSingleWithdraw, "Amount exceeds limit");
        
        // Reentrancy ë°©ì§€: ìƒíƒœ ë¨¼ì € ì´ˆê¸°í™”
        self.claimableAmounts.set(sender, 0);
        
        // Jetton ì „ì†¡
        send(SendParameters{
            to: self.gameJettonWallet,
            value: ton("0.1"),
            mode: SendPayGasSeparately,
            body: JettonTransfer{
                queryId: msg.queryId,
                amount: amount,
                destination: sender,
                responseDestination: self.owner,
                customPayload: null,
                forwardTonAmount: ton("0.01"),
                forwardPayload: null
            }.toCell()
        });
    }

    get fun getClaimable(user: Address): Int {
        let amount: Int? = self.claimableAmounts.get(user);
        return (amount == null) ? 0 : amount!!;
    }
}
```

##***REMOVED*****2. í”„ë¡ íŠ¸ì—”ë“œ ë„¤íŠ¸ì›Œí¬ ì„¤ì • (index.html Line 254-262)**

```javascript
// ============================================
// ë„¤íŠ¸ì›Œí¬ ì„¤ì • (ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ì„¸ìš”!)
// ============================================
const NETWORK = 'testnet'; // 'testnet' ë˜ëŠ” 'mainnet'

const CONTRACT_ADDRESSES = {
    testnet: 'EQAIlrbypzom9HibUyYxosqmYnIRjFWAhFs5E1ybnKY2XtQg',
    mainnet: 'MAINNET_CONTRACT_ADDRESS_HERE' // ë©”ì¸ë„· ë°°í¬ í›„ ì…ë ¥
};

const CONTRACT_ADDRESS = CONTRACT_ADDRESSES[NETWORK];
const IS_TESTNET = NETWORK === 'testnet';
```

##***REMOVED*****3. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (deploySecure.ts)**

```typescript
export async function run(provider: NetworkProvider) {
    const network = provider.network();
    const isTestnet = network === 'testnet';

    console.log('\nğŸš€ CSPINWithdrawalSecure ë°°í¬');
    console.log(`ğŸ“ ë„¤íŠ¸ì›Œí¬: ${isTestnet ? 'Testnet' : 'Mainnet'}\n`);

    const ownerAddress = await provider.ui().input('ê´€ë¦¬ì ì£¼ì†Œ (Owner):');
    const jettonMaster = await provider.ui().input('CSPIN Jetton Master:');
    const gameJettonWallet = await provider.ui().input('ê²Œì„ Jetton Wallet:');

    const cspinWithdrawal = provider.open(
        await CSPINWithdrawalSecure.fromInit(
            Address.parse(ownerAddress),
            Address.parse(jettonMaster),
            Address.parse(gameJettonWallet)
        )
    );

    await cspinWithdrawal.send(
        provider.sender(),
        { value: toNano('0.1') },
        { $$type: 'Deploy', queryId: 0n }
    );

    await provider.waitForDeploy(cspinWithdrawal.address);
    console.log(`âœ… ë°°í¬ ì™„ë£Œ: ${cspinWithdrawal.address.toString()}`);
}
```

---

#***REMOVED***ğŸ”§ ì´ ëª¨ë“ˆì„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì— ì´ì‹í•˜ëŠ” ë°©ë²•

##***REMOVED*****Step 1: íŒŒì¼ ë³µì‚¬**
```bash
***REMOVED***í•„ìˆ˜ íŒŒì¼
sources/CSPINWithdrawalSecure.tact
scripts/deploySecure.ts
scripts/setClaimable.ts
scripts/pauseContract.ts
scripts/unpauseContract.ts
scripts/withdrawTON.ts
frontend-poc/index.html

***REMOVED***ì„¤ì • íŒŒì¼
.env.example (â†’ .envë¡œ ë³µì‚¬ í›„ ìˆ˜ì •)
.gitignore
tact.config.json
blueprint.yaml
package.json
```

##***REMOVED*****Step 2: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
`.env` íŒŒì¼ ìƒì„± í›„:
```bash
WALLET_VERSION=v5r1
MAINNET_OWNER=YOUR_OWNER_ADDRESS
MAINNET_JETTON_MASTER=YOUR_JETTON_MASTER_ADDRESS
MAINNET_GAME_WALLET=YOUR_GAME_WALLET_ADDRESS
MAINNET_GAME_JETTON_WALLET=YOUR_GAME_JETTON_WALLET_ADDRESS
```

##***REMOVED*****Step 3: ì»¨íŠ¸ë™íŠ¸ íŒŒë¼ë¯¸í„° ì»¤ìŠ¤í„°ë§ˆì´ì§•**

###***REMOVED*****ìµœëŒ€ ì¸ì¶œ ê¸ˆì•¡ ë³€ê²½**
`sources/CSPINWithdrawalSecure.tact` Line 59:
```tact
// í˜„ì¬: 1,000,000 CSPIN
self.maxSingleWithdraw = 1000000000000000;

// ì˜ˆì‹œ: 100 CSPINìœ¼ë¡œ ë³€ê²½
self.maxSingleWithdraw = 100000000000;

// ê³µì‹: ì›í•˜ëŠ”_CSPIN_ì–‘ * 1,000,000,000
```

###***REMOVED*****ìµœì†Œ TON ì”ì•¡ ë³€ê²½**
`sources/CSPINWithdrawalSecure.tact` Line 95:
```tact
// í˜„ì¬: 0.1 TON
let minBalance: Int = ton("0.1");

// ì˜ˆì‹œ: 0.5 TONìœ¼ë¡œ ë³€ê²½
let minBalance: Int = ton("0.5");
```

###***REMOVED*****Jetton ì „ì†¡ ìˆ˜ìˆ˜ë£Œ ì¡°ì •**
`sources/CSPINWithdrawalSecure.tact` Line 135:
```tact
send(SendParameters{
    to: self.gameJettonWallet,
    value: ton("0.1"),  // ì „ì†¡ ìˆ˜ìˆ˜ë£Œ
    mode: SendPayGasSeparately,
    body: JettonTransfer{
        ...
        forwardTonAmount: ton("0.01"),  // ì‚¬ìš©ìì—ê²Œ ì „ë‹¬í•  TON
        ...
    }.toCell()
});
```

##***REMOVED*****Step 4: í”„ë¡ íŠ¸ì—”ë“œ í†µí•©**

###***REMOVED*****A. ê¸°ì¡´ ì›¹ì‚¬ì´íŠ¸ì— í†µí•©**
`frontend-poc/index.html` ë‚´ìš©ì„ ë³µì‚¬:
```html
<!-- TonConnect UI CSS -->
<link rel="stylesheet" href="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.css">

<!-- TonConnect UI JS -->
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>

<!-- TonWeb (Cell ìƒì„±ìš©) -->
<script src="https://unpkg.com/tonweb@0.0.66/dist/tonweb.js"></script>

<script>
    const NETWORK = 'mainnet'; // ë˜ëŠ” 'testnet'
    const CONTRACT_ADDRESSES = {
        mainnet: 'YOUR_MAINNET_CONTRACT_ADDRESS',
        testnet: 'YOUR_TESTNET_CONTRACT_ADDRESS'
    };
    
    // ... (index.htmlì˜ JavaScript ì½”ë“œ ë³µì‚¬)
</script>
```

###***REMOVED*****B. React/Vue/Next.js í†µí•©**
```javascript
// npm ì„¤ì¹˜
npm install @tonconnect/ui-react tonweb

// React ì˜ˆì‹œ
import { TonConnectButton, useTonConnectUI } from '@tonconnect/ui-react';

function WithdrawComponent() {
    const [tonConnectUI] = useTonConnectUI();
    
    const handleWithdraw = async (amount) => {
        const transaction = {
            validUntil: Math.floor(Date.now() / 1000) + 600,
            messages: [{
                address: CONTRACT_ADDRESS,
                amount: '100000000', // 0.1 TON
                payload: /* ClaimRequest BOC */
            }]
        };
        
        await tonConnectUI.sendTransaction(transaction);
    };
    
    return <TonConnectButton />;
}
```

##***REMOVED*****Step 5: ë°±ì—”ë“œ í†µí•© (SetClaimable)**

###***REMOVED*****Node.js/TypeScript ì˜ˆì‹œ**
```typescript
import { Address, toNano } from '@ton/core';
import { TonClient, WalletContractV5R1 } from '@ton/ton';
import { mnemonicToPrivateKey } from '@ton/crypto';

async function setUserClaimable(userAddress: string, amount: number) {
    // TON í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
    const client = new TonClient({
        endpoint: 'https://toncenter.com/api/v2/jsonRPC'
    });
    
    // Owner ì§€ê°‘ ë¡œë“œ
    const mnemonic = process.env.OWNER_MNEMONIC.split(' ');
    const keyPair = await mnemonicToPrivateKey(mnemonic);
    const wallet = WalletContractV5R1.create({
        workchain: 0,
        publicKey: keyPair.publicKey
    });
    
    // ë©”ì‹œì§€ êµ¬ì„±
    const message = {
        $$type: 'SetClaimable',
        user: Address.parse(userAddress),
        amount: BigInt(amount * 1_000_000_000) // CSPIN to nanoCSPIN
    };
    
    // ì „ì†¡
    await wallet.sendTransfer({
        seqno: await wallet.getSeqno(),
        secretKey: keyPair.secretKey,
        messages: [{
            to: Address.parse(CONTRACT_ADDRESS),
            value: toNano('0.05'),
            body: beginCell()
                .store(/* SetClaimable ë©”ì‹œì§€ ì¸ì½”ë”© */)
                .endCell()
        }]
    });
}

// ì‚¬ìš© ì˜ˆì‹œ
await setUserClaimable('UQBFPDdSl...', 100); // 100 CSPIN ì„¤ì •
```

###***REMOVED*****Python (TON SDK) ì˜ˆì‹œ**
```python
from pytoniq import LiteBalancer, WalletV5R1

async def set_user_claimable(user_address: str, amount: float):
    provider = LiteBalancer.from_mainnet_config()
    wallet = await WalletV5R1.from_mnemonic(provider, OWNER_MNEMONIC.split())
    
    message = {
        "user": user_address,
        "amount": int(amount * 1_000_000_000)
    }
    
    await wallet.transfer(
        destination=CONTRACT_ADDRESS,
        amount=int(0.05 * 1e9),  ***REMOVED***0.05 TON
        body=encode_set_claimable(message)
    )
```

---

#***REMOVED***âš ï¸ ì£¼ì˜ì‚¬í•­ ë° í•¨ì •

##***REMOVED*****1. ë„¤íŠ¸ì›Œí¬ ê°ì§€ ì´ìŠˆ**
**ë¬¸ì œ**: TonConnectê°€ Testnet/Mainnet Chain IDë¥¼ **ë°˜ëŒ€ë¡œ ë³´ê³ **í•¨
- Tonkeeper: `-3` = Testnet, `-239` = Mainnet
- ì‹¤ì œ: `-3` = Mainnet, `-239` = Testnet (í‘œì¤€)

**í•´ê²°**: `index.html` Line 331ì— Chain ID ê¸°ë°˜ ê°ì§€ ë¡œì§ êµ¬í˜„ë¨
```javascript
const chainId = wallet.account.chain;
if (chainId === '-3') {
    detectedNetwork = 'Testnet';
} else if (chainId === '-239') {
    detectedNetwork = 'Mainnet';
}
```

##***REMOVED*****2. CSPIN ë‹¨ìœ„ ë³€í™˜**
**ì¤‘ìš”**: 1 CSPIN = 1,000,000,000 nanoCSPIN (10^9)

```javascript
// ì˜ëª»ëœ ì˜ˆì‹œ âŒ
amount: 100  // 0.0000001 CSPIN

// ì˜¬ë°”ë¥¸ ì˜ˆì‹œ âœ…
amount: BigInt(100 * 1_000_000_000)  // 100 CSPIN
```

##***REMOVED*****3. Gas Fee ë¶€ì¡± ì˜¤ë¥˜**
**ì¦ìƒ**: "Insufficient funds" ì—ëŸ¬

**ì›ì¸**:
- ì‚¬ìš©ì ì§€ê°‘ TON ì”ì•¡ < 0.1 TON
- ì»¨íŠ¸ë™íŠ¸ TON ì”ì•¡ < 0.1 TON (ìµœì†Œ ìœ ì§€ ê¸ˆì•¡)

**í•´ê²°**:
```tact
// ClaimRequest ìˆ˜ì‹  ì‹œ 0.1 TON í•„ìš” (Line 131)
send(SendParameters{
    to: self.gameJettonWallet,
    value: ton("0.1"),  // ì´ ê¸ˆì•¡ì€ ì»¨íŠ¸ë™íŠ¸ê°€ ì§€ë¶ˆ
    ...
});
```

##***REMOVED*****4. Jetton Wallet ì£¼ì†Œ í˜¼ë™**
**ì£¼ì˜**: 3ê°€ì§€ ë‹¤ë¥¸ ì£¼ì†Œê°€ ìˆìŒ
- `jettonMaster`: CSPIN Jetton Master ì»¨íŠ¸ë™íŠ¸
- `gameJettonWallet`: ê²Œì„ ì§€ê°‘ì˜ CSPIN Jetton Wallet (í† í° ë³´ìœ )
- `userJettonWallet`: ì‚¬ìš©ìì˜ CSPIN Jetton Wallet (ì¸ì¶œ ëª©ì ì§€)

**í™•ì¸ ë°©ë²•**:
```bash
***REMOVED***Jetton Wallet ì£¼ì†Œ ì¡°íšŒ (Tonscan ë˜ëŠ” API)
https://tonscan.org/jetton/JETTON_MASTER_ADDRESS
```

##***REMOVED*****5. Pause ìƒíƒœì—ì„œ ì¸ì¶œ ì‹œë„**
**ì¦ìƒ**: "Contract is paused" ì—ëŸ¬

**ì›ì¸**: ê¸´ê¸‰ ì •ì§€ í™œì„±í™”ë¨

**í•´ê²°**:
```powershell
***REMOVED***Unpause ëª…ë ¹ ì‹¤í–‰
npx blueprint run unpauseContract --mainnet
```

##***REMOVED*****6. Mnemonic ë³´ì•ˆ**
**ì ˆëŒ€ í•˜ì§€ ë§ ê²ƒ** âŒ:
- `.env` íŒŒì¼ì— Mnemonic ì €ì¥
- Gitì— ì»¤ë°‹
- ì½”ë“œì— í•˜ë“œì½”ë”©
- ë¡œê·¸ íŒŒì¼ì— ì¶œë ¥

**ì˜¬ë°”ë¥¸ ë°©ë²•** âœ…:
- TonConnect (QR ì½”ë“œ) ì‚¬ìš©
- í™˜ê²½ ë³€ìˆ˜ë¡œ ì „ë‹¬ (ì„œë²„ì—ì„œë§Œ)
- 1íšŒìš© ì…ë ¥ í›„ ë©”ëª¨ë¦¬ì—ì„œ ì‚­ì œ

---

#***REMOVED***ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

##***REMOVED*****ë¡œì»¬ í…ŒìŠ¤íŠ¸ (Blueprint)**
```powershell
***REMOVED***1. ì»´íŒŒì¼
npx blueprint build CSPINWithdrawalSecure

***REMOVED***2. ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npx blueprint test

***REMOVED***3. Testnet ë°°í¬
npx blueprint run deploySecure --testnet

***REMOVED***4. SetClaimable í…ŒìŠ¤íŠ¸
npx blueprint run setClaimable --testnet
***REMOVED***ì…ë ¥: í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ì£¼ì†Œ, 100 CSPIN

***REMOVED***5. í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
***REMOVED***frontend-poc/index.html ì—´ê¸°
***REMOVED***Testnet ì§€ê°‘ ì—°ê²° â†’ ì¸ì¶œ í…ŒìŠ¤íŠ¸
```

##***REMOVED*****Mainnet ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸**
- [ ] Testnetì—ì„œ ëª¨ë“  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] Owner ì§€ê°‘ 0.5 TON ì´ìƒ ë³´ìœ 
- [ ] Jetton Master ì£¼ì†Œ í™•ì¸
- [ ] Game Jetton Wallet ì£¼ì†Œ í™•ì¸
- [ ] Game Jetton Walletì— ì¶©ë¶„í•œ CSPIN ë³´ìœ 
- [ ] `.gitignore` ì„¤ì • í™•ì¸
- [ ] Mnemonic íŒŒì¼ ì €ì¥ ì•ˆ í•¨ í™•ì¸

---

#***REMOVED***ğŸ“ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

##***REMOVED*****"Contract not found" ì—ëŸ¬**
**ì›ì¸**: ì»¨íŠ¸ë™íŠ¸ ë°°í¬ ë¯¸ì™„ë£Œ ë˜ëŠ” ì£¼ì†Œ ì˜¤íƒ€

**í•´ê²°**:
```powershell
***REMOVED***Tonscanì—ì„œ ì£¼ì†Œ í™•ì¸
https://tonscan.org/address/YOUR_CONTRACT_ADDRESS

***REMOVED***ë°°í¬ ìƒíƒœ í™•ì¸
npx blueprint run deploySecure --mainnet
```

##***REMOVED*****"Insufficient balance" ì—ëŸ¬**
**ì›ì¸**: 
1. ì»¨íŠ¸ë™íŠ¸ TON ì”ì•¡ < 0.1 TON
2. Game Jetton Wallet CSPIN ì”ì•¡ ë¶€ì¡±

**í•´ê²°**:
```powershell
***REMOVED***1. ì»¨íŠ¸ë™íŠ¸ì— TON ì¶©ì „
***REMOVED***Owner ì§€ê°‘ â†’ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë¡œ 0.5 TON ì „ì†¡

***REMOVED***2. Game Jetton Wallet ì”ì•¡ í™•ì¸
***REMOVED***Tonscanì—ì„œ í™•ì¸: https://tonscan.org/address/GAME_JETTON_WALLET
```

##***REMOVED*****"Amount exceeds limit" ì—ëŸ¬**
**ì›ì¸**: ì¸ì¶œ ìš”ì²­ ê¸ˆì•¡ > 1,000,000 CSPIN

**í•´ê²°**:
```tact
// maxSingleWithdraw ê°’ ì¦ê°€ (sources/CSPINWithdrawalSecure.tact Line 59)
self.maxSingleWithdraw = 10000000000000000;  // 10,000,000 CSPIN
```

##***REMOVED*****í”„ë¡ íŠ¸ì—”ë“œ "Network mismatch" ê²½ê³ **
**ì›ì¸**: Testnet ì§€ê°‘ìœ¼ë¡œ Mainnet ì»¨íŠ¸ë™íŠ¸ ì ‘ê·¼ (ë˜ëŠ” ë°˜ëŒ€)

**í•´ê²°**:
```javascript
// index.html Line 256 í™•ì¸
const NETWORK = 'mainnet'; // ì§€ê°‘ê³¼ ë™ì¼í•œ ë„¤íŠ¸ì›Œí¬ë¡œ ì„¤ì •
```

---

#***REMOVED***ğŸ“š ì°¸ê³  ìë£Œ

##***REMOVED*****TON ë¬¸ì„œ**
- Tact ì–¸ì–´: https://docs.tact-lang.org/
- Blueprint: https://github.com/ton-org/blueprint
- TonConnect: https://docs.ton.org/develop/dapps/ton-connect/overview
- Jetton í‘œì¤€: https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md

##***REMOVED*****í”„ë¡œì íŠ¸ ë‚´ ë¬¸ì„œ**
- `README.md`: í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš”
- `SCRIPTS.md`: ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ë²•
- `ADMIN_GUIDE.md`: ê´€ë¦¬ì ìš´ì˜ ê°€ì´ë“œ
- `SECURITY_RECOMMENDATIONS.md`: ë³´ì•ˆ ê¶Œì¥ ì‚¬í•­
- `POC_GUIDE.md`: PoC í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

##***REMOVED*****ìœ ìš©í•œ ëª…ë ¹ì–´**
```powershell
***REMOVED***ì»´íŒŒì¼
npx blueprint build CSPINWithdrawalSecure

***REMOVED***ë°°í¬ (Testnet)
npx blueprint run deploySecure --testnet

***REMOVED***ë°°í¬ (Mainnet)
npx blueprint run deploySecure --mainnet

***REMOVED***SetClaimable
npx blueprint run setClaimable --mainnet

***REMOVED***Pause/Unpause
npx blueprint run pauseContract --mainnet
npx blueprint run unpauseContract --mainnet

***REMOVED***TON ì¸ì¶œ
npx blueprint run withdrawTON --mainnet

***REMOVED***í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
***REMOVED***(VSCode) Live Server ë˜ëŠ”
python -m http.server 8000
***REMOVED***ì—´ê¸°: http://localhost:8000/frontend-poc/
```

---

#***REMOVED***ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ (Mainnet ë°°í¬ í›„)

##***REMOVED*****1. ëª¨ë‹ˆí„°ë§ ì„¤ì •**
- Tonscan ì•Œë¦¼ ì„¤ì •: https://tonscan.org
- ì»¨íŠ¸ë™íŠ¸ ì´ë²¤íŠ¸ ë¡œê¹… (ë°±ì—”ë“œ)
- ì¼ì¼ ì¸ì¶œëŸ‰ ì¶”ì 

##***REMOVED*****2. ë³´ì•ˆ ê°•í™”**
- Multi-sig ì§€ê°‘ ê³ ë ¤ (Owner)
- ì¼ì¼ ì¸ì¶œ í•œë„ ì¶”ê°€
- Rate limiting (ì‚¬ìš©ìë³„)

##***REMOVED*****3. ìµœì í™”**
- Gas Fee ìµœì í™” (Cell í¬ê¸° ìµœì†Œí™”)
- Batch SetClaimable (ì—¬ëŸ¬ ì‚¬ìš©ì ë™ì‹œ ì„¤ì •)
- í”„ë¡ íŠ¸ì—”ë“œ ìºì‹± (TonConnect ìƒíƒœ)

##***REMOVED*****4. GitHub ì—…ë¡œë“œ**
```powershell
***REMOVED***í´ë”ëª… ë³€ê²½
Rename-Item contracts CONTRACTS_PoC

***REMOVED***Git ì´ˆê¸°í™”
cd CONTRACTS_PoC
git init
git add .
git commit -m "Initial commit: CSPIN Withdrawal PoC"

***REMOVED***GitHub ì—…ë¡œë“œ
git remote add origin https://github.com/YOUR_USERNAME/CONTRACTS_PoC.git
git push -u origin main
```

---

#***REMOVED***ğŸ“ í˜„ì¬ ì„¸ì…˜ ìƒíƒœ ìš”ì•½

##***REMOVED*****ë°°í¬ ìƒíƒœ**
- âœ… Testnet ë°°í¬ ì™„ë£Œ
- âœ… Pause/Unpause í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- âœ… í”„ë¡ íŠ¸ì—”ë“œ PoC ì™„ë£Œ
- âœ… ë³´ì•ˆ ê²€í†  ì™„ë£Œ (Mnemonic ì œê±°)
- âœ… ìµœëŒ€ ì¸ì¶œ 1,000,000 CSPINìœ¼ë¡œ ë³€ê²½
- âœ… ì¬ì»´íŒŒì¼ ì™„ë£Œ (Hash: d5d78e8239e34c71...)
- â³ Mainnet ë°°í¬ ëŒ€ê¸° ì¤‘

##***REMOVED*****ë§ˆì§€ë§‰ ë³€ê²½ ì‚¬í•­ (2025-10-27)**
1. `maxSingleWithdraw`: 1,000 CSPIN â†’ 1,000,000 CSPIN
2. `deploySecure.ts`: ì¶œë ¥ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
3. `ADMIN_GUIDE.md`: ì œí•œ ê°’ ì—…ë°ì´íŠ¸
4. `SECURITY_RECOMMENDATIONS.md`: ì˜ˆì‹œ ì½”ë“œ ì—…ë°ì´íŠ¸
5. ì¬ì»´íŒŒì¼: ìƒˆ í•´ì‹œ `d5d78e8239e34c71...`

##***REMOVED*****ë‹¤ìŒ ì‘ì—…**
1. Mainnet ë°°í¬ (`npx blueprint run deploySecure --mainnet`)
2. `.env` ë° `index.html` ì—…ë°ì´íŠ¸ (Mainnet ì£¼ì†Œ)
3. í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸ (ì†Œì•¡ ì¸ì¶œ)
4. GitHub ì—…ë¡œë“œ ì¤€ë¹„

---

**ì´ ë¬¸ì„œë¥¼ ìƒˆ AI ì„¸ì…˜ì— ë³µì‚¬í•˜ë©´ ì¦‰ì‹œ í”„ë¡œì íŠ¸ ìƒíƒœë¥¼ íŒŒì•…í•˜ê³  ì‘ì—…ì„ ì´ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**
