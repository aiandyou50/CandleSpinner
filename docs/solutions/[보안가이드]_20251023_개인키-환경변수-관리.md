# ğŸ” ë³´ì•ˆ ì„¤ì • ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”
ì´ ë¬¸ì„œëŠ” CandleSpinnerì˜ ë¯¼ê°í•œ í™˜ê²½ë³€ìˆ˜(ê°œì¸í‚¤ ë“±)ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## âš ï¸ ì¤‘ìš”: ê°œì¸í‚¤ëŠ” ì ˆëŒ€ í•˜ë“œì½”ë”©í•˜ì§€ ë§ˆì„¸ìš”

### âŒ ìœ„í—˜í•œ ë°©ë²• (ê¸ˆì§€)
```toml
# wrangler.toml - DO NOT DO THIS!
[vars]
GAME_WALLET_PRIVATE_KEY = "4e6568d1..." # âŒ ì ˆëŒ€ ê¸ˆì§€!
```

### âœ… ì•ˆì „í•œ ë°©ë²•
Cloudflare Pagesì˜ **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## ğŸ”§ Cloudflare Pages í™˜ê²½ë³€ìˆ˜ ì„¤ì • ë°©ë²•

### Step 1: Cloudflare ëŒ€ì‹œë³´ë“œ ì ‘ì†
1. https://dash.cloudflare.com ë¡œê·¸ì¸
2. **Pages** â†’ `candlespinner` í”„ë¡œì íŠ¸ ì„ íƒ

### Step 2: í™˜ê²½ë³€ìˆ˜ ì¶”ê°€
1. **Settings** â†’ **Environment variables** í´ë¦­
2. **Add variable** ë²„íŠ¼

### Step 3: Production í™˜ê²½ì— ë³€ìˆ˜ ì¶”ê°€

**ë³€ìˆ˜ëª…:**
```
GAME_WALLET_PRIVATE_KEY
```

**ê°’:**
```
[wallet-tools/mnemonic-to-key.mjsì—ì„œ ìƒì„±í•œ privateKey]
```

**ë°”ì¸ë”©:** Production

âš ï¸ **ì ˆëŒ€ ê¸ˆì§€:** ì´ ë¬¸ì„œë‚˜ ì½”ë“œì— ì‹¤ì œ ê°œì¸í‚¤ ì‘ì„±

### Step 4: ë°°í¬ í›„ í™•ì¸
```bash
curl https://aiandyou.me/api/debug-private-key
# ì‘ë‹µ:
# {
#   "hasPrivateKey": true,
#   "addressMatches": true,
#   "verification": "âœ… ê°œì¸í‚¤ì™€ ì§€ê°‘ ì£¼ì†Œê°€ ì¼ì¹˜í•©ë‹ˆë‹¤!"
# }
```

---

## ğŸ›¡ï¸ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ë°°í¬ ì „ í™•ì¸ì‚¬í•­
- [ ] `wrangler.toml`ì— ê°œì¸í‚¤ ì—†ìŒ (ì£¼ì„ë§Œ ìˆìŒ)
- [ ] `.gitignore`ì— ë¯¼ê°í•œ íŒŒì¼ ì¶”ê°€ë¨
- [ ] Cloudflare í™˜ê²½ë³€ìˆ˜ì— `GAME_WALLET_PRIVATE_KEY` ì„¤ì •ë¨
- [ ] GitHubì—ëŠ” ê³µê°œí‚¤ ì •ë³´ë§Œ ìˆìŒ

### âœ… ê°œë°œ ë¡œì»¬ í™˜ê²½ ì„¤ì •
```bash
# .env.local (ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”)
# wallet-tools/mnemonic-to-key.mjsì—ì„œ ìƒì„±í•œ privateKey ê°’
GAME_WALLET_PRIVATE_KEY=[128ì-hex-ê°’]
GAME_WALLET_ADDRESS=UQBFPDdSlPgqPrn2XwhpVq0KQExN2kv83_batQ-dptaR8Mtd
```

---

## ğŸ“ ë³€ìˆ˜ ì„¤ëª…

| ë³€ìˆ˜ | ì„¤ì •ìœ„ì¹˜ | ê³µê°œ? | ì„¤ëª… |
|------|---------|-------|------|
| `GAME_WALLET_ADDRESS` | wrangler.toml | âœ… ê³µê°œ | ê²Œì„ ì§€ê°‘ ì£¼ì†Œ (ê³µê°œ ì •ë³´) |
| `GAME_WALLET_PRIVATE_KEY` | Cloudflare í™˜ê²½ | ğŸ” ë¹„ê³µê°œ | ê°œì¸í‚¤ (ì ˆëŒ€ ë…¸ì¶œ ê¸ˆì§€) |
| `CSPIN_TOKEN_ADDRESS` | wrangler.toml | âœ… ê³µê°œ | CSPIN í† í° ì£¼ì†Œ |
| `TON_RPC_API_KEY` | Cloudflare í™˜ê²½ | ğŸ” ë¹„ê³µê°œ | TON RPC ì¸ì¦ í‚¤ |

---

## ğŸš¨ ì£¼ì˜: ê°œì¸í‚¤ ì ˆëŒ€ ê¸°ë¡ ê¸ˆì§€

**ì´ ë¬¸ì„œì—ëŠ” ì‹¤ì œ ê°œì¸í‚¤ê°€ í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**
- ëª¨ë“  ê°œì¸í‚¤ ê°’ì€ Cloudflare ëŒ€ì‹œë³´ë“œì—ì„œë§Œ ê´€ë¦¬
- ë¡œì»¬ ê°œë°œ: `.env.local` (`.gitignore` í¬í•¨)
- í„°ë¯¸ë„: ì ˆëŒ€ ê°œì¸í‚¤ ì¶œë ¥ ê¸ˆì§€

---

## ğŸ“š Best Practices

### 1ï¸âƒ£ ê°œì¸í‚¤ ìƒì„± ë° ì €ì¥
```bash
# mnemonic-to-key.mjsë¡œ ê°œì¸í‚¤ ìƒì„± (ë¡œì»¬ì—ì„œë§Œ)
node wallet-tools/mnemonic-to-key.mjs "your 24-word mnemonic"

# ì¶œë ¥ëœ privateKeyë¥¼ ë³µì‚¬ë§Œ í•¨ (íŒŒì¼ì— ì €ì¥ ê¸ˆì§€)
# Cloudflareì—ë§Œ ì…ë ¥
# ë¡œì»¬ íˆìŠ¤í† ë¦¬ ì‚­ì œ:
Clear-History  # PowerShell
```

### 2ï¸âƒ£ ì½”ë“œì—ì„œ ê°œì¸í‚¤ ì ‘ê·¼
```typescript
// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
const gameWalletPrivateKey = env.GAME_WALLET_PRIVATE_KEY;

// âŒ ì ˆëŒ€ ê¸ˆì§€
const gameWalletPrivateKey = "4e6568d1..."; // í•˜ë“œì½”ë”© ê¸ˆì§€!
```

### 3ï¸âƒ£ ë¡œì»¬ ê°œë°œ í™˜ê²½
```bash
# .env.local íŒŒì¼ ìƒì„± (ì ˆëŒ€ Git ì»¤ë°‹ ê¸ˆì§€)
echo "GAME_WALLET_PRIVATE_KEY=..." > .env.local

# .gitignoreì— ì¶”ê°€
echo ".env.local" >> .gitignore

# ë¡œì»¬ ê°œë°œ ì‹œì‘
npm run dev
```

---

## ğŸ” ê°ì‚¬ ë° ëª¨ë‹ˆí„°ë§

### Tonscanì—ì„œ ì§€ê°‘ í™œë™ ëª¨ë‹ˆí„°ë§
- URL: `https://tonscan.org/address/{GAME_WALLET_ADDRESS}`
- ì´ìƒí•œ ê±°ë˜ ë°œìƒ ì‹œ ì¦‰ì‹œ ì¡°ì¹˜

### í„°ë¯¸ë„ íˆìŠ¤í† ë¦¬ ì •ë¦¬
```bash
# PowerShell: í˜„ì¬ ì„¸ì…˜ íˆìŠ¤í† ë¦¬ ì œê±°
Remove-Item (Get-PSReadlineOption).HistorySavePath

# Bash: í˜„ì¬ ì„¸ì…˜ íˆìŠ¤í† ë¦¬ ì œê±°
history -c
```

---

## ğŸ“ ë¬¸ì œ ë°œìƒ ì‹œ

### ê°œì¸í‚¤ ë…¸ì¶œëœ ê²½ìš°
1. **ê¸´ê¸‰ ëŒ€ì‘:** ì§€ê°‘ì˜ ëª¨ë“  ìì‚°ì„ ìƒˆ ì§€ê°‘ìœ¼ë¡œ ì´ì „
2. **Git ì •ë¦¬:** `git rm --cached` ë˜ëŠ” `git-filter-branch`ë¡œ íˆìŠ¤í† ë¦¬ ì œê±°
3. **Cloudflare ì—…ë°ì´íŠ¸:** ìƒˆ ê°œì¸í‚¤ë¡œ í™˜ê²½ë³€ìˆ˜ êµì²´

### Cloudflare í™˜ê²½ë³€ìˆ˜ í™•ì¸ ì‹¤íŒ¨
1. Pages í”„ë¡œì íŠ¸ Settings ì¬í™•ì¸
2. ë³€ìˆ˜ëª…/ê°’ ì •í™•íˆ ì…ë ¥ë˜ì—ˆëŠ”ì§€ ê²€ì¦
3. ë°°í¬ í›„ ìµœì†Œ 1-2ë¶„ ëŒ€ê¸° í›„ ì¬ì‹œë„

---

## ğŸ“Œ ì°¸ê³  ë¬¸ì„œ

- [Cloudflare Pages - Environment Variables](https://developers.cloudflare.com/pages/platform/functions/environment-variables/)
- [TON Wallet Security](https://ton.org/docs/#/security)
- [Git Secrets Prevention](https://github.com/awslabs/git-secrets)

