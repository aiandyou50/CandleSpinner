# 🔐 보안 기록 삭제 가이드

## ⚠️ 긴급 상황

현재 다음 곳에서 개인키/니모닉이 노출되었습니다:
1. **PowerShell 터미널 히스토리** - 로컬 저장됨
2. **이 채팅 세션** - 자동 기록됨
3. ~~**GitHub**~~ - ✅ 방지됨 (wrangler.toml 제거)

---

## 🔧 즉시 조치 (로컬)

### 1️⃣ PowerShell 히스토리 삭제

#### **현재 세션 히스토리 즉시 삭제**
```powershell
# 현재 세션의 모든 명령 히스토리 삭제
Clear-History
```

#### **저장된 히스토리 파일 삭제**
```powershell
# 히스토리 파일 위치 확인
(Get-PSReadlineOption).HistorySavePath

# 파일 삭제
Remove-Item (Get-PSReadlineOption).HistorySavePath -Force

# 또는 경로 직접 지정 (보통)
Remove-Item "$env:APPDATA\Microsoft\Windows\PowerShell\PSReadLine\ConsoleHost_history.txt" -Force
```

#### **완료 확인**
```powershell
# 히스토리가 비워졌는지 확인
Get-History
# 결과: (빈 결과 = 성공)
```

---

### 2️⃣ Bash 터미널 히스토리 삭제 (만약 사용한 경우)

```bash
# 현재 세션 히스토리 삭제
history -c

# 저장된 히스토리 파일 삭제
rm ~/.bash_history
rm ~/.zsh_history

# 새로운 히스토리 시작
history -w
```

---

### 3️⃣ Windows 명령 프롬프트 히스토리 삭제 (만약 사용한 경우)

```cmd
# 명령 프롬프트 히스토리 삭제
doskey /history
```

---

## 🌐 채팅 세션 기록 (외부)

### ⚠️ 채팅 세션에 노출된 정보

**노출 위치:**
1. **이 대화 스레드** - 자동 로깅됨
2. **AI 모델 학습 데이터** - 가능성 있음
3. **사용 통계/분석** - 메타데이터

### ❌ 불가능한 조치
- 채팅 기록 완전 삭제 불가능 (자동 기록됨)
- AI 학습 데이터에서 제거 불가능

### ✅ 가능한 조치

#### **이 채팅 내용 삭제**
```
현재 채팅 플랫폼에서 "Delete Conversation" 또는 "Clear History" 옵션
(플랫폼마다 다름)
```

#### **향후 예방**
- 개인키/니모닉은 절대 채팅에 입력하지 마세요
- 필요시 마스킹하여 공유: `4e6568...ef7978fc`

---

## 📋 위험도 평가

| 노출 경로 | 위험도 | 조치 | 완료 |
|----------|--------|------|------|
| GitHub | ❌ 없음 | 파일 제거됨 | ✅ |
| wrangler.toml | ✅ 제거됨 | 주석으로 변경 | ✅ |
| PowerShell 히스토리 | ⚠️ 높음 | 아래 참고 | 🔄 필요 |
| 채팅 세션 | ⚠️ 높음 | 아래 참고 | 🔄 필요 |
| 테스트 지갑 | 🟡 중간 | 소량 자산으로 테스트 | ⏳ 모니터링 필요 |

---

## 🎯 즉시 실행할 명령어

### PowerShell에서 복사-붙여넣기

```powershell
# 1단계: 현재 세션 삭제
Clear-History

# 2단계: 저장된 파일 삭제
Remove-Item (Get-PSReadlineOption).HistorySavePath -Force

# 3단계: 확인
Get-History  # 빈 결과가 나와야 함
```

---

## ✅ 확인 체크리스트

- [ ] PowerShell 히스토리 `Clear-History` 실행
- [ ] 저장된 히스토리 파일 삭제됨
- [ ] `Get-History` 명령으로 비워졌는지 확인
- [ ] 이 채팅 내용 검토 (개인키 포함된 부분 인식)
- [ ] 향후 개인키는 절대 터미널에서 출력하지 않기 (리다이렉트 사용)

---

## 🚀 향후 안전한 실행 방법

### ✅ 개인키 생성 시 (안전한 방법)

```powershell
# 파일로 리다이렉트 (화면에 출력 안 함)
node wallet-tools/mnemonic-to-key.mjs "your-24-word-mnemonic" > privatekey.txt

# 개인키 직접 확인 (한 줄만)
(Get-Content privatekey.txt | Select-String "privateKey" -Context 0,1).Matches.Groups[1].Value

# 파일 확인 후 삭제
Remove-Item privatekey.txt -Force
```

### ✅ 터미널 히스토리 비활성화

```powershell
# PowerShell 프로필 편집
notepad $PROFILE

# 다음 추가
Remove-Item (Get-PSReadlineOption).HistorySavePath -Force -ErrorAction SilentlyContinue
```

---

## 📞 문제 발생 시

### "히스토리 파일을 삭제할 수 없음"
```powershell
# 파일이 잠겨있을 수 있음
# PowerShell을 관리자 권한으로 다시 실행 후
Remove-Item (Get-PSReadlineOption).HistorySavePath -Force
```

### "개인키가 여전히 메모리에 있나?"
- 이론상 PowerShell 프로세스 종료 시 메모리 해제
- 실무상: 히스토리 파일 삭제가 최선

---

## 🔒 테스트 지갑 안전성 평가

**현재 상황:**
- 지갑: `UQBFPDdSlPgqPrn2XwhpVq0KQExN2kv83_batQ-dptaR8Mtd`
- 상태: 메인넷 운영 중, 실제 자산 운영
- 위험도: 🟡 **낮음** (자산이 없으므로)

**권장사항:**
1. 지갑을 모니터링하지 않음 (자산 없음)
2. 향후 프로덕션 지갑은 새로 생성
3. 현재 지갑은 테스트 목적으로만 사용

---

## 📚 참고 자료

- [PowerShell PSReadLine 문서](https://docs.microsoft.com/en-us/powershell/module/psreadline/)
- [Windows 보안 가이드](https://docs.microsoft.com/en-us/windows-server/security/)
- [TON Wallet Security](https://ton.org/docs/#/security)

