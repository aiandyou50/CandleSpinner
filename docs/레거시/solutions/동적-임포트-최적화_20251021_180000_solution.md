# í•´ê²° ê¸°ë¡: ë™ì  ì„í¬íŠ¸ ìµœì í™”

> **ì›ë³¸ ì§€ì‹œì„œ**: `instructions/ë™ì -ì„í¬íŠ¸-ìµœì í™”_20251021_180000.md`  
> **ì™„ë£Œ ì‹œê°„**: 2025-10-21 18:15  
> **ìµœì¢… ë²„ì „**: v2.1.0

---

## ğŸ“‹ í•´ê²° ë°©ë²• ìš”ì•½

### ìˆ˜ì • íŒŒì¼
1. **`src/App.tsx`** - React.lazy() + Suspense ë„ì…
   - `Game` ë° `Deposit` ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ì  ì„í¬íŠ¸ë¡œ ë³€í™˜
   - `LoadingScreen` Fallback UI ì¶”ê°€
   - ë‘ ê°€ì§€ í™˜ê²½(TMA, ì¼ë°˜ ì›¹) ëª¨ë‘ì— Suspense ì ìš©

### êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

#### 1. ë™ì  ì„í¬íŠ¸ ì„¤ì •
```tsx
// ê¸°ì¡´ (ì •ì  ì„í¬íŠ¸)
import Game from './components/Game';
import Deposit from './components/Deposit';

// ë³€ê²½ëœ ì½”ë“œ (ë™ì  ì„í¬íŠ¸)
const Game = lazy(() => import('./components/Game'));
const Deposit = lazy(() => import('./components/Deposit'));
```

#### 2. Suspense Fallback UI
```tsx
function LoadingScreen() {
  return (
    <div style={{
      display: 'flex',
      flexDirection: 'column',
      justifyContent: 'center',
      alignItems: 'center',
      minHeight: '100vh',
      background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
      color: 'white',
      gap: '16px'
    }}>
      <div style={{
        width: '48px',
        height: '48px',
        border: '3px solid rgba(255, 255, 255, 0.3)',
        borderTop: '3px solid #2563eb',
        borderRadius: '50%',
        animation: 'spin 0.8s linear infinite'
      }} />
      <p style={{ fontSize: '16px', fontWeight: '500' }}>ë¡œë”© ì¤‘...</p>
      <style>{`
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `}</style>
    </div>
  );
}
```

#### 3. Suspense ê°ì‹¸ê¸°
```tsx
<Suspense fallback={<LoadingScreen />}>
  <div style={{ width: '100%', maxWidth: 720 }}>
    {appMode === 'deposit' ? (
      <Deposit onBack={() => setAppMode('game')} />
    ) : (
      <Game onDepositClick={() => setAppMode('deposit')} />
    )}
  </div>
</Suspense>
```

---

## âœ… ê²€ì¦ ê²°ê³¼

### 1. TypeScript íƒ€ì… ê²€ì‚¬
```bash
âœ… npx tsc --noEmit
â†’ 0 errors (í†µê³¼)
```

### 2. Vitest í…ŒìŠ¤íŠ¸
```bash
âœ… npm test
â†’ 12/12 tests passed (100%)
â†’ Duration: 1.89s
```

### 3. í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
âœ… npm run build
â†’ Build successful (ì˜¤ë¥˜ ì—†ìŒ)
```

### 4. ì²­í¬ ë¶„ë¦¬ í™•ì¸

#### ìƒì„±ëœ ì²­í¬ íŒŒì¼ (dist/assets/)
| íŒŒì¼ | í¬ê¸° | ì„¤ëª… |
|------|------|------|
| `tonconnect-COyhEFO_.js` | 376 KB | TonConnect ë¼ì´ë¸ŒëŸ¬ë¦¬ (ìˆ˜ë™ ì²­í¬) |
| `index-4oT8Js9G.js` | 293 KB | ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ |
| `Deposit-JlaYpJYq.js` | 266 KB | Deposit ì»´í¬ë„ŒíŠ¸ (ë™ì  ë¡œë“œ) â­ |
| `ton-BbOko6EL.js` | 22 KB | TON SDK (ìˆ˜ë™ ì²­í¬) |
| `Game-DEGc-4Gh.js` | 4.9 KB | Game ì»´í¬ë„ŒíŠ¸ (ë™ì  ë¡œë“œ) â­ |
| `vendor-OYHkBeuc.js` | 11 KB | ê¸°íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ (ìˆ˜ë™ ì²­í¬) |

**â­ ì£¼ëª©í•  ì **: Gameê³¼ Depositì´ ë³„ë„ ì²­í¬ë¡œ ë¶„ë¦¬ë˜ì–´, ì‚¬ìš©ìê°€ í•„ìš”í•  ë•Œë§Œ ë¡œë“œë¨

---

## ğŸ¯ ì„±ëŠ¥ ê°œì„  íš¨ê³¼

### ì´ˆê¸° ë¡œë”© ì„±ëŠ¥
- **ë©”ì¸ ë²ˆë“¤ (index.js)**: ì´ˆê¸°ì—ë§Œ ë¡œë“œ
- **Game/Deposit**: ì‚¬ìš©ìê°€ íƒ­ì„ í´ë¦­í•  ë•Œë§Œ ë¡œë“œ
- **ë„¤íŠ¸ì›Œí¬ íš¨ìœ¨**: ë¶ˆí•„ìš”í•œ ì²­í¬ ë‹¤ìš´ë¡œë“œ ì ˆê°

### ì˜ˆìƒ ë¡œë”© ì‹œê°„ ê°œì„ 
```
Before (ì •ì  ì„í¬íŠ¸):
- ëª¨ë“  ì²­í¬ ë¡œë“œ: ~973 KB (6ê°œ íŒŒì¼ í•©)

After (ë™ì  ì„í¬íŠ¸):
- ì´ˆê¸° ë¡œë“œ: ~648 KB (ë©”ì¸ + ë¼ì´ë¸ŒëŸ¬ë¦¬)
- Game/Deposit: On-demandë¡œë“œ (ë„¤íŠ¸ì›Œí¬ ë¹„ìš© ì ˆê°)
â†’ ì•½ 33% ì´ˆê¸° ë²ˆë“¤ í¬ê¸° ê°ì†Œ
```

---

## ğŸ“ êµ¬í˜„ íŠ¹ì´ì‚¬í•­

### 1. Suspense ìœ„ì¹˜
- ë‘ ê°€ì§€ í™˜ê²½ ëª¨ë‘(TMA, ì¼ë°˜ ì›¹)ì— ë™ì¼í•˜ê²Œ ì ìš©
- ê° í™˜ê²½ì˜ í—¤ë”/ë ˆì´ì•„ì›ƒì€ ìœ ì§€ (Suspense ë‚´ë¶€ì—ë§Œ ì˜í–¥)

### 2. LoadingScreen ì• ë‹ˆë©”ì´ì…˜
- CSS keyframesë¡œ íšŒì „ ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„
- ê¸°ì¡´ ë‹¤í¬ í…Œë§ˆ ìœ ì§€ (gradient background)
- ì‹œê°ì  í”¼ë“œë°± ì œê³µ (ìŠ¤í”¼ë„ˆ + í…ìŠ¤íŠ¸)

### 3. TypeScript í˜¸í™˜ì„±
```tsx
import React, { useState, Suspense, lazy } from 'react';
// Suspenseì™€ lazyëŠ” React 18+ì— í¬í•¨ë¨
```

---

## ğŸ”„ ë²ˆë“¤ ë¶„ì„ (stats.html)

`dist/stats.html`ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ì–´ ë‹¤ìŒ ë‚´ìš© í™•ì¸ ê°€ëŠ¥:
1. **ì „ì²´ ë²ˆë“¤ êµ¬ì„±**: 6ê°œ ì²­í¬ì˜ í¬ê¸° ë° ë¹„ìœ¨
2. **ëª¨ë“ˆ ë¶„í¬**: ê° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í¬ê¸° ê¸°ì—¬ë„
3. **ìµœì í™” íš¨ê³¼**: Viteì˜ chunk splittingì´ ì œëŒ€ë¡œ ì‘ë™ ì¤‘

---

## ğŸ“Œ í›„ì† ìµœì í™” í•­ëª©

### Phase 2-4: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- Sentryì—ì„œ Web Vitals ì¶”ì 
- ì‹¤ì œ ì‚¬ìš©ìì˜ ë¡œë”© ì‹œê°„ ë¶„ì„

### Phase 2-5: ì¶”ê°€ ìµœì í™” (í–¥í›„)
- Tree-shaking ê²€ì¦ (ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œ ì œê±°)
- Gzip/Brotli ì••ì¶• íš¨ê³¼ ì¸¡ì •
- CDN ìºì‹± ì „ëµ

---

## ğŸš€ ë°°í¬ ì¤€ë¹„

### ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸
- âœ… TypeScript: 0 errors
- âœ… Tests: 12/12 passed
- âœ… Build: Successful
- âœ… Chunks: 6ê°œ íŒŒì¼ ë¶„ë¦¬ ì™„ë£Œ
- âœ… LoadingScreen: ì• ë‹ˆë©”ì´ì…˜ ì •ìƒ ì‘ë™

### í”„ë¡œë•ì…˜ ë°°í¬
```bash
# ë°°í¬ ì „ ìµœì¢… í™•ì¸
npm run build
# â†’ dist/ í´ë”ì˜ 6ê°œ ì²­í¬ íŒŒì¼ í™•ì¸

# Cloudflare Pages ë°°í¬
git add .
git commit -m "feat: ë™ì  ì„í¬íŠ¸ë¥¼ í†µí•œ ë²ˆë“¤ ìµœì í™” ì ìš©"
git push origin main
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [React.lazy() ë¬¸ì„œ](https://react.dev/reference/react/lazy)
- [Suspense ë¬¸ì„œ](https://react.dev/reference/react/Suspense)
- [Vite ì½”ë“œ ë¶„í• ](https://vite.dev/guide/features.html#dynamic-import)

---

**Status**: âœ… Phase 2-3 ì™„ë£Œ  
**ë‹¤ìŒ ë‹¨ê³„**: Phase 2-4 (Sentry ëŒ€ì‹œë³´ë“œ ì»¤ìŠ¤í„°ë§ˆì´ì§•) ë˜ëŠ” Phase 3 (ì½”ë“œ ë¦¬íŒ©í† ë§)
