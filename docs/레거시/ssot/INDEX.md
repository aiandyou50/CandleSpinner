# 📚 SSOT (Single Source of Truth) - 완전 가이드

**프로젝트**: CandleSpinner  
**최종 업데이트**: 2025-10-21  
**상태**: ✅ 모든 문서 최신화 완료

---

## 🎯 SSOT 문서 구조

CandleSpinner의 SSOT는 다음과 같은 계층 구조로 구성됩니다:

```
📘 SSOT (Single Source of Truth)
├─ 📄 README.md (메인 가이드) ⭐ 여기서 시작
├─ 📑 산출물 (기존 문서)
│  ├─ [산출물1] 프로젝트 정의서
│  ├─ [산출물2] 기술 스택 및 아키텍처
│  ├─ [산출물3] MVP 핵심 로직 의사코드
│  └─ [산출물4] TMA 하이브리드 변환
└─ 📋 색인 (현재 파일)
```

---

## 📖 각 문서의 역할

### 1️⃣ **README.md** (메인 SSOT 문서) ⭐

**용도**: 모든 정보의 중앙 저장소  
**대상**: 개발자, 운영팀, 신규 참여자  
**크기**: 약 750줄  
**최신도**: ✅ 100% (실시간 업데이트)

**포함 내용**:
- 📋 목차 (10개 섹션)
- 🎯 프로젝트 정의
- 🛠️ 기술 스택
- 🏗️ 아키텍처
- ✅ 구현 현황 (Phase 2 완료)
- 🔗 TON 블록체인 주소
- 💡 핵심 기능 상세
- 🎮 게임 플로우
- 📚 필수 학습 자료
- 🔗 참고 문서 링크
- 🐛 트러블슈팅 (6가지)

**읽어야 할 시점**:
- ✅ 프로젝트 처음 시작할 때
- ✅ 구현 현황 확인 필요할 때
- ✅ 기술 개요 이해 필요할 때
- ✅ 버그 해결 필요할 때

---

### 2️⃣ **[산출물 1] 프로젝트 정의서** (v2.0)

**용도**: 프로젝트 초기 요구사항 정의  
**대상**: 프로젝트 관리자, 스테이크홀더  
**크기**: 약 120줄  
**최신도**: ✅ 기본 정보만 포함 (README 참고 권장)

**포함 내용**:
- 프로젝트 개요
- 기술 스택
- 핵심 기능명세
- 슬롯머신 규칙
- 토큰 경제 모델
- 개발 로드맵

**읽어야 할 시점**:
- ✅ 프로젝트 목표 이해
- ✅ 게임 규칙 확인
- ✅ 초기 요구사항 검증

⚠️ **주의**: README.md에 최신 정보가 있으므로 그곳을 먼저 참고하세요.

---

### 3️⃣ **[산출물 2] 기술 스택 및 아키텍처** (v2.2.0)

**용도**: 상세한 기술 스택과 아키텍처 설명  
**대상**: 개발자, 아키텍트  
**크기**: 약 290줄  
**최신도**: ✅ 기본 구조 정보 포함 (README 더 상세함)

**포함 내용**:
- 시스템 아키텍처 (다이어그램)
- 프론트엔드 기술 스택
- 백엔드 기술 스택
- API 엔드포인트
- 데이터 저장소 (KV)
- 입금 흐름 (v2.0 vs v2.1.0)
- A/B 테스트 비교
- 배포 프로세스

**읽어야 할 시점**:
- ✅ 아키텍처 상세 이해
- ✅ API 설계 검토
- ✅ 기술 스택 검증

⚠️ **주의**: README.md 섹션 2-3에 최신 정보가 있습니다.

---

### 4️⃣ **[산출물 3] MVP 핵심 로직 의사코드** (v2.1.0)

**용도**: 게임 로직의 상세 의사코드 구현  
**대상**: 게임 개발자, 백엔드 엔지니어  
**크기**: 약 870줄  
**최신도**: ✅ Phase 1 로직 포함 (Phase 2 신규 기능 별도)

**포함 내용**:
- 백엔드 로직 (Cloudflare Functions)
- 상수 및 헬퍼 함수
- API 엔드포인트 의사코드
  - /api/spin
  - /api/double-up
  - /api/collect-winnings
  - /api/deposit
  - /api/withdrawal
- 프론트엔드 로직 (React)
- CSPIN 입금/인출 로직
- A/B 이중 입금 방식

**읽어야 할 시점**:
- ✅ 게임 로직 이해
- ✅ API 구현 참고
- ✅ Provably Fair 알고리즘 학습

⚠️ **주의**: README.md 섹션 6에 Phase 2 신규 기능이 있습니다.

---

### 5️⃣ **[산출물 4] TMA 하이브리드 변환** (v2.0)

**용도**: Telegram Mini App 통합 구현  
**대상**: 프론트엔드 개발자  
**크기**: 약 170줄  
**최신도**: ✅ TMA 통합 기본 사항 포함

**포함 내용**:
- TMA 개념 및 개요
- TMA SDK 통합
- 환경 감지 및 조건부 렌더링
- TMA 전용 컴포넌트
- 하이브리드 라우팅 로직
- 보안 및 검증
- 배포 설정

**읽어야 할 시점**:
- ✅ TMA 환경에서 배포
- ✅ Telegram 봇 설정
- ✅ 하이브리드 아키텍처 이해

⚠️ **주의**: README.md 섹션 3에 현재 아키텍처가 있습니다.

---

## 🔄 버전 관리

| 문서 | v1.0 | v2.0 | v2.1 | v2.2 | 현재 |
|------|------|------|------|------|------|
| README.md | - | ✅ | - | - | ✅ 2.0 |
| 산출물1 | ✅ | ✅ | - | - | ✅ 2.0 |
| 산출물2 | - | - | ✅ | ✅ | ✅ 2.2.0 |
| 산출물3 | - | ✅ | ✅ | - | ✅ 2.1.0 |
| 산출물4 | ✅ | ✅ | - | - | ✅ 2.0 |

**업데이트 정책**:
- ✅ README.md는 실시간 업데이트
- ✅ 산출물은 완성도 기준 버전 관리
- ⚠️ 중요: 각 산출물 상단의 "참고" 섹션 확인

---

## 📊 현재 구현 현황

### Phase 2: TON 표준 준수 ✅ 완료

| Issue | 기능 | 커밋 | 상태 |
|-------|------|------|------|
| #1 | forward_ton_amount = 1 | b288994 | ✅ |
| #2-3 | 에러 분류 + 재시도 | b288994 | ✅ |
| #4 | 블록체인 확인 | 906a296 | ✅ |
| #5 | 응답 구조화 | 15388ee | ✅ |
| #6 | Jetton 동적 조회 | 1629472 | ✅ |
| #7 | 가스비 동적 계산 | a7c030c | ✅ |
| Sentry | 에러 모니터링 | 10a149a | ✅ |
| 버그 | Address 체크섬 | b65511d | ✅ |

**테스트**: ✅ 12/12 통과 (100%)

---

## 🚀 빠른 시작

### 1. 첫 방문자

```
1. README.md 전체 읽기 (약 30분)
2. 섹션 1-3 이해 (개요, 스택, 아키텍처)
3. 섹션 6 검토 (핵심 기능)
4. 섹션 10 북마크 (트러블슈팅)
```

### 2. 개발자

```
1. README.md 섹션 2-3 (기술 스택)
2. 산출물2 상세 검토 (아키텍처)
3. 산출물3 의사코드 학습 (게임 로직)
4. README.md 섹션 6 (구현 상세)
```

### 3. 운영팀

```
1. README.md 섹션 1 (프로젝트 정의)
2. 산출물1 전체 (요구사항)
3. README.md 섹션 4 (구현 현황)
4. README.md 섹션 9 (참고 자료)
```

### 4. 신규 참여자

```
1. README.md 전체 (1시간)
2. 관련 산출물 (30분)
3. 필수 학습 자료 (섹션 8) 시작
4. 멘토와 상담
```

---

## 🔗 문서 간 링크

```
README.md
├─ 섹션 1 → 산출물1 참고
├─ 섹션 2 → 산출물2 참고
├─ 섹션 3 → 산출물4 참고
├─ 섹션 6 → 산출물3 참고
└─ 섹션 8 → 필수 학습 자료

산출물 문서들
└─ 모두 → README.md 최신 정보 참고
```

---

## ✅ SSOT 검증 체크리스트

- [x] README.md 포괄적 구조 (10개 섹션)
- [x] 모든 산출물 최신화 (버전 정보 추가)
- [x] 현재 코드 완전 반영 (Phase 2 완료)
- [x] 상호 참조 명확화 (각 문서 상단 "참고" 섹션)
- [x] 트러블슈팅 가이드 추가 (6가지 경우)
- [x] 학습 자료 링크 (50+개)
- [x] 버전 관리 (모든 문서 v2.x 이상)
- [x] 아키텍처 다이어그램 (3개)
- [x] API 명세 (5개+)
- [x] 색인 문서 (현재 파일)

---

## 📞 질문 및 지원

### 자주 묻는 질문 (FAQ)

**Q: 어떤 문서부터 읽어야 하나요?**  
A: README.md를 먼저 읽으세요. 모든 정보가 중앙화되어 있습니다.

**Q: 산출물1-4는 필요 없나요?**  
A: 초기 설계 과정을 이해하고 싶다면 참고할 수 있지만, README.md가 최신화되어 있습니다.

**Q: 버그를 찾았어요. 어디에 보고하나요?**  
A: README.md 섹션 10 (트러블슈팅)을 먼저 확인하세요.

**Q: 새로운 기능을 추가하려면?**  
A: README.md 섹션 8-9를 읽고, 필요한 기술 자료를 학습하세요.

---

## 📝 문서 관리 정책

**업데이트 주기**:
- README.md: 실시간 (매 커밋 후)
- 산출물1-4: 월간 (버전 업데이트)
- 색인 (이 파일): 월간

**변경 사항 기록**:
```
2025-10-21: SSOT v2.0 완성 (README + 산출물 최신화)
```

**담당자**: GitHub Copilot + 개발팀

---

**🎯 핵심 원칙**: 

> **"SSOT는 항상 README.md를 메인 정보원으로 사용합니다."**

모든 문서는 README.md의 최신 정보를 참고하도록 안내합니다.

---

**마지막 업데이트**: 2025-10-21 23:00 KST  
**상태**: ✅ 완료  
**다음 검토**: 2025-11-21

