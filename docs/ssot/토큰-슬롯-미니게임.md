# 🎰 토큰 경제, 슬롯머신 룰, 미니게임

> 출처: `docs/ssot/[산출물1]프로젝트-정의서.md`

---

## 🕹️ 슬롯머신 규칙 (Slot Machine Rules)

### 🔧 기본 구성
- **릴(Reel) 수**: 3-Reel 슬롯머신  
- **심볼(Symbols)**: 이미지 대신 이모지(Emoji) 사용

### 📊 심볼 정보

| 심볼 | 명칭 | 희귀도 | 배당률 (Multiplier) | 개별 릴 확률 |
|:----:|:------|:--------:|:-------------------:|:------------:|
| ⭐   | 별     | Common   | ×0.5                | 35%          |
| 🪐   | 행성   | Common   | ×1                  | 25%          |
| ☄️   | 혜성   | Uncommon | ×2                  | 15%          |
| 🚀   | 로켓   | Uncommon | ×3                  | 10%          |
| 👽   | 외계인 | Rare     | ×5                  | 7%           |
| 💎   | 다이아몬드 | Rare | ×10                 | 5%           |
| 👑   | 왕관   | Legend   | ×20                 | 3%           |

### 💰 당첨금 계산 방식 (독창적 규칙)
- 각 릴에서 당첨된 심볼에 대해 **개별적으로 상금을 계산**한 후 **총합**으로 지급.
- **공식**:  
  `총 상금 = Σ(베팅액 × 해당 릴 심볼 배당률)`  

- **예시**:  
  베팅액 **100 CSPIN**, 2개 릴에서 '로켓(×3)' 당첨 →  
  `(100 × 3) + (100 × 3) = 600 CSPIN`

### 🏆 잭팟(Jackpot) 규칙
- **발동 조건**: 3개 릴 모두 **동일한 심볼**이 나올 경우
- **잭팟 상금**:  
  `(3개 릴의 개별 당첨금 총합) × 100`
  
- **예시**:  
  베팅액 **100 CSPIN**, 3개 릴 모두 '로켓(×3)' →  
  `((100×3) + (100×3) + (100×3)) × 100 = 90,000 CSPIN`

### ✅ 공정성 보장
- 결과는 **서버에서 결정**
- **Provably Fair 알고리즘** 적용 → 결과의 **투명성**과 **신뢰성** 확보

---

## 🎮 미니게임: 더블업 (Double-Up)

### 🔓 발동 조건
- 슬롯머신 스핀에서 **1회라도 당첨금이 발생**하면 자동 등장

### 🎯 게임 방식
- **선택지**: 빨간색 버튼 또는 파란색 버튼
- **확률**: 성공/실패 각 **50%**

| 결과 | 보상 |
|:-----|:-----|
| ✅ 성공 | 현재 당첨금 **×2** 획득 |
| ❌ 실패 | 현재 당첨금 **전부 소실** |

### ⚠️ 플레이 제한
- **슬롯머신 스핀 1회당** → **더블업 기회 1회만** 제공  
- **연속 도전 불가**

---

## 💎 토큰 경제 모델 (Tokenomics)

| 항목 | 비율 | 설명 |
|:-----|:----:|:-----|
| **RTP**<br>(Return to Player) | **95%** | 전체 베팅액의 95%가 장기적으로 사용자에게 상금으로 반환됨<br>→ 심볼 확률 및 배당률은 이를 기준으로 설계 |
| **하우스 엣지**<br>(House Edge) | **5%** | 프로젝트 운영, 개발, 마케팅 등의 지속 가능한 수익원으로 활용 |

--- 

## 🎨 UI/UX 디자인 명세서

### 4.1 전체 화면 레이아웃

#### 메인 화면 구성
- **상단**: 사용자 정보 패널 (보유 CSPIN 토큰, 랭크, 프로필)
- **중앙**: 3-릴 슬롯머신 주요 인터페이스
- **하단**: 베팅 컨트롤 패널 (베팅 액수 조절, 스핀 버튼)
- **우측**: 당첨 내역 및 통계 패널

### 4.2 슬롯머신 인터페이스 상세

#### 릴 디자인
- **구성**: 3개의 수직 릴이 중앙에 배치
- **크기**: 각 릴 크기 120x240px (반응형 디자인 적용)
- **심볼 표시 영역**: 각 릴당 3개의 심볼이 동시에 표시
- **애니메이션**: 
  - 스핀 시 부드러운 스크롤 효과
  - 당첨 시 해당 릴 하이라이트

#### 심볼 표시 규칙
- **당첨 라인**: 중앙 수평선을 기준으로 당첨 심볼 표시
- **시각적 피드백**: 당첨 시 심볼 주변에 애니메이션 효과 적용
- **희귀도별 시각적 차별화**:
  - **Common** (⭐, 🪐): 일반 테두리
  - **Uncommon** (☄️, 🚀): 파란색 하이라이트
  - **Rare** (👽, 💎): 보라색 하이라이트 + 약간의 빛 효과
  - **Legend** (👑): 금색 하이라이트 + 강렬한 빛 효과

### 4.3 상호작용 요소

#### 베팅 컨트롤
- **슬라이더**: 베팅 액수 조절 (최소 10 CSPIN ~ 최대 1,000 CSPIN)
- **퀵 베팅 버튼**: 100, 500, 1000 CSPIN 단축 버튼
- **자동 스핀 기능**: 5회, 10회, 50회 옵션

#### 스핀 버튼
- **크기**: 80x80px 원형 버튼
- **색상**: 
  - 당첨 가능 상태일 때: 녹색
  - 충전 중일 때: 회색
- **애니메이션**: 
  - 호버 효과
  - 클릭 시 펄스 효과

### 4.4 미니게임 (더블업) UI

#### 트리거 조건
- 슬롯 당첨 발생 시 자동으로 팝업 표시

#### 팝업 디자인
- **배경**: 반투명 오버레이
- **중앙 인터페이스**: 더블업 게임 UI
- **현재 당첨금 표시**: 명확하게 표시
- **버튼**: 
  - 빨간색/파란색 버튼 (각 120x60px)
  - "건너뛰기" 버튼 옵션

### 4.5 반응형 디자인 요구사항

- **모바일** (320px~768px): 
  - 세로 화면 최적화
  - 터치 영역 확대
- **태블릿** (769px~1024px): 
  - 가로/세로 모두 지원
- **데스크톱** (1025px+): 
  - 와이드 뷰 최적화
  - 추가 정보 패널 표시

---

## 📋 기능 요구사항 정의

### 5.1 핵심 기능

- **FR-001**: 사용자는 CSPIN 토큰을 베팅하여 슬롯머신을 스핀할 수 있다.
- **FR-002**: 서버는 Provably Fair 알고리즘을 사용하여 무작위 결과를 생성해야 한다.
- **FR-003**: 당첨 결과는 개별 릴당 배당률을 적용하여 계산되어야 한다.
- **FR-004**: 3개 릴에 동일한 심볼이 등장할 경우 잭팟이 자동으로 발동되어야 한다.
- **FR-005**: 슬롯 스핀에서 당첨금이 발생할 경우 더블업 미니게임이 자동으로 표시되어야 한다.
- **FR-006**: 사용자는 더블업 게임에서 빨간색 또는 파란색 버튼을 선택할 수 있다.

### 5.2 사용자 관리

- **FR-101**: 사용자는 보유 CSPIN 잔액을 실시간으로 확인할 수 있어야 한다.
- **FR-102**: 모든 게임 결과는 사용자 계정에 실시간으로 반영되어야 한다.
- **FR-103**: 사용자는 게임 내역을 확인할 수 있는 기록 페이지에 접근할 수 있어야 한다.

### 5.3 보안 요구사항

- **SR-001**: 모든 게임 결과는 서버 측에서 결정되어야 하며, 클라이언트는 결과만 표시한다.
- **SR-002**: Provably Fair 시스템을 통해 게임의 공정성을 검증할 수 있는 메커니즘이 제공되어야 한다.
- **SR-003**: 사용자 자금 이동은 양자화된 트랜잭션 기록과 함께 안전하게 처리되어야 한다.

---

## ⚡ 비기능 요구사항

### 6.1 성능 요구사항

- **NR-001**: 페이지 로딩 시간은 3초 이내여야 한다.
- **NR-002**: 슬롯 스핀 결과는 사용자 클릭 후 1초 이내에 표시되어야 한다.
- **NR-003**: 시스템은 분당 최소 1,000회 동시 스핀을 처리할 수 있어야 한다.

### 6.2 접근성 요구사항

- **AR-001**: WCAG 2.1 AA 준수
- **AR-002**: 색상 대비율 최소 4.5:1 유지
- **AR-003**: 키보드 네비게이션 및 스크린 리더 지원

### 6.3 호환성 요구사항

- **CR-001**: 최신 버전의 Chrome, Firefox, Safari, Edge 지원
- **CR-002**: iOS 14+, Android 10+ 지원
- **CR-003**: 모든 주요 브라우저에서 동일한 기능과 디자인 제공

---

## 📊 상태 다이어그램

### 7.1 게임 흐름

```
[대기 상태] → [베팅 설정] → [스핀 실행] → [결과 계산]
     ↓                               ↓
[자금 부족]                     [당첨 발생?]
                                 ↓    ↓
                         [더블업 제안]  [일반 당첨]
                                 ↓        ↓
                         [버튼 선택]   [금액 지급]
                                 ↓
                         [성공/실패 확인]
                                 ↓
                          [최종 금액 반영]
```

---

## ✅ 검증 계획

### 8.1 테스트 케이스

- **TC-001**: 모든 심볼의 확률이 문서화된 대로 정확하게 발생하는지 검증
- **TC-002**: 잭팟 조건이 정확하게 트리거되는지 검증
- **TC-003**: 더블업 기능이 슬롯 스핀당 1회만 실행되는지 검증
- **TC-004**: RTP 95%가 장기적으로 유지되는지 검증

### 8.2 성능 테스트

- **부하 테스트**: 1,000명 동시 접속 시 시스템 안정성 검증
- **응답 시간 테스트**: 모든 API 응답이 500ms 이내인지 확인

--- 

> ✨ **공정하고 투명한 게임 환경을 통해 유저와 프로젝트가 함께 성장합니다!**
