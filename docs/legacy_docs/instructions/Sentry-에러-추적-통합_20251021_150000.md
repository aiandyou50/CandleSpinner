# Sentry ì—ëŸ¬ ì¶”ì  í†µí•© ì§€ì‹œì„œ
## ëª©í‘œ: í”„ë¡œë•ì…˜ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•
### ì™„ë£Œ ë‚ ì§œ: 2025-10-21

---

## ğŸ“‹ ì‘ì—… ê°œìš”

**ëª©ì **: Sentryë¥¼ í†µí•œ ì‹¤ì‹œê°„ ì—ëŸ¬ ì¶”ì  ë° ëª¨ë‹ˆí„°ë§ ì¸í”„ë¼ êµ¬ì¶•

**ì ìš© ë²”ìœ„**: 
- ì „ì—­ ì—ëŸ¬ ë°”ìš´ë”ë¦¬ (ErrorBoundary)
- Sentry SDK ì´ˆê¸°í™”
- í™˜ê²½ë³„ ì„¤ì • (ê°œë°œ/í”„ë¡œë•ì…˜)

---

## ğŸ›  êµ¬í˜„ ë‚´ìš©

### 1. Sentry SDK ì„¤ì¹˜
```bash
npm install --save @sentry/react @sentry/tracing
```

### 2. ì£¼ìš” ì½”ë“œ ë³€ê²½ì‚¬í•­

#### `src/main.tsx` - Sentry ì´ˆê¸°í™”
```typescript
import * as Sentry from '@sentry/react';

if (typeof window !== 'undefined') {
  const SENTRY_DSN = import.meta.env.VITE_SENTRY_DSN || 'https://placeholder@sentry.io/123456';
  const environment = import.meta.env.MODE === 'production' ? 'production' : 'development';

  Sentry.init({
    dsn: SENTRY_DSN,
    environment: environment,
    tracesSampleRate: environment === 'production' ? 0.1 : 1.0,
  });
}
```

#### `src/components/ErrorBoundary.tsx` - ìƒˆë¡œ ìƒì„±
```typescript
class ErrorBoundary extends Component<Props, State> {
  componentDidCatch(error: Error, errorInfo: ErrorInfo): void {
    Sentry.captureException(error, {
      contexts: {
        react: {
          componentStack: errorInfo.componentStack,
        },
      },
    });
  }
}
```

#### `src/App.tsx` - ErrorBoundary ì ìš©
```typescript
<ErrorBoundary>
  <TonConnectUIProvider manifestUrl={TON_CONNECT_MANIFEST_URL}>
    {/* ì•± ì½˜í…ì¸  */}
  </TonConnectUIProvider>
</ErrorBoundary>
```

### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

#### `.env` (ê¸°ë³¸ê°’)
```
VITE_SENTRY_DSN=https://placeholder@sentry.io/123456
VITE_TON_RPC_URL=https://toncenter.com/api/v2/jsonRPC
```

#### `.env.example` (í…œí”Œë¦¿)
```
VITE_SENTRY_DSN=https://your_sentry_key@o123456.ingest.sentry.io/123456
VITE_TON_RPC_URL=https://toncenter.com/api/v2/jsonRPC
```

### 4. TypeScript íƒ€ì… ì„ ì–¸
`src/vite-env.d.ts`ì— ImportMeta íƒ€ì… ì¶”ê°€:
```typescript
interface ImportMeta {
  readonly env: {
    readonly VITE_SENTRY_DSN?: string;
    readonly VITE_TON_RPC_URL?: string;
    readonly MODE: 'development' | 'production';
  };
}
```

---

## ğŸ”‘ ì£¼ìš” ê¸°ëŠ¥

### ErrorBoundaryì˜ ì—­í• 
1. **ì „ì—­ ì—ëŸ¬ ìº¡ì²˜**: React ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ì—ëŸ¬ ê°ì§€
2. **Sentry ìë™ ë³´ê³ **: ì—ëŸ¬ ë°œìƒ ì‹œ ìë™ìœ¼ë¡œ Sentryë¡œ ì „ì†¡
3. **ì‚¬ìš©ì ì¹œí™”ì  UI**: ì—ëŸ¬ ë°œìƒ ì‹œ ê¹”ë”í•œ ì˜¤ë¥˜ í™”ë©´ í‘œì‹œ
4. **ìƒì„¸ ì •ë³´ ì œê³µ**: ì—ëŸ¬ ì„¸ë¶€ì •ë³´ ë° ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ í¬í•¨

### Sentry ì´ˆê¸°í™” ì„¤ì •
- **DSN**: í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬ (í…ŒìŠ¤íŠ¸/í”„ë¡œë•ì…˜ êµ¬ë¶„)
- **Environment**: MODEì— ë”°ë¼ ìë™ ì„¤ì •
- **Sample Rate**: í”„ë¡œë•ì…˜ì—ì„œ 10%, ê°œë°œì—ì„œ 100%

---

## âœ… ê²€ì¦ ë°©ë²•

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
npm test -- --run
```
**ê²°ê³¼**: âœ… 12/12 tests passed

### íƒ€ì… ì²´í¬
```bash
npm run typecheck
```
**ê²°ê³¼**: âœ… No errors

### ë¹Œë“œ í™•ì¸
```bash
npm run build
```

---

## ğŸ“Š êµ¬í˜„ ìƒíƒœ

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| Sentry SDK ì„¤ì¹˜ | âœ… | @sentry/react íŒ¨í‚¤ì§€ |
| main.tsx ì´ˆê¸°í™” | âœ… | í™˜ê²½ë³„ DSN ì„¤ì • |
| ErrorBoundary êµ¬í˜„ | âœ… | ì „ì—­ ì—ëŸ¬ ìº¡ì²˜ |
| App.tsx ì ìš© | âœ… | Provider ë˜í•‘ |
| í™˜ê²½ë³€ìˆ˜ ì„¤ì • | âœ… | .env, .env.example |
| TypeScript íƒ€ì… | âœ… | ImportMeta ì„ ì–¸ |
| í…ŒìŠ¤íŠ¸ í†µê³¼ | âœ… | 12/12 tests passed |

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„ (Phase 1 ê³„ì†)

### 3ï¸âƒ£ Rate Limiting ì ìš©
- Cloudflare Workersì—ì„œ Rate Limiting êµ¬í˜„
- API ì—”ë“œí¬ì¸íŠ¸ë³„ ìš”ì²­ ì œí•œ ì„¤ì •

### 4ï¸âƒ£ í™˜ê²½ë³€ìˆ˜ í™•ëŒ€
- CSPIN_JETTON_WALLET ë“± ì£¼ì†Œë¥¼ í™˜ê²½ë³€ìˆ˜í™”
- ë©”ì¸ë„·/í…ŒìŠ¤íŠ¸ë„· ë¶„ë¦¬ ì„¤ì •

---

## ğŸ“ ì»¤ë°‹ ì •ë³´

**Commit Hash**: fa0303f  
**ë©”ì‹œì§€**: feat: Sentry ì—ëŸ¬ ì¶”ì  í†µí•© + Error Boundary ì¶”ê°€

```
9 files changed, 326 insertions(+), 3 deletions(-)
- ì„¤ì¹˜: @sentry/react, @sentry/tracing
- ìƒì„±: src/components/ErrorBoundary.tsx
- ìˆ˜ì •: src/main.tsx, src/App.tsx, src/vite-env.d.ts
- ìƒì„±: .env, .env.example
```

---

## ğŸ”— ì°¸ê³  ìë£Œ

- [Sentry React ë¬¸ì„œ](https://docs.sentry.io/platforms/javascript/guides/react/)
- [React Error Boundary](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)
- [í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ (Vite)](https://vitejs.dev/guide/env-and-mode.html)

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **í”„ë¡œë•ì…˜ DSN ì„¤ì • í•„ìˆ˜**: 
   - `.env.production.local`ì— ì‹¤ì œ Sentry DSN ì„¤ì •
   - í˜„ì¬ placeholder DSNì€ í…ŒìŠ¤íŠ¸ ëª©ì 

2. **ë¯¼ê°í•œ ì •ë³´ ë³´í˜¸**:
   - `.env.local`, `.env.production.local`ì€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ
   - `.gitignore`ì— ì´ë¯¸ ì¶”ê°€ë¨

3. **Error Boundaryì˜ í•œê³„**:
   - ë¹„ë™ê¸° ì—ëŸ¬ëŠ” catchí•˜ì§€ ëª»í•¨ (try-catch ì‚¬ìš© í•„ìš”)
   - ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì˜ ì—ëŸ¬ëŠ” catchí•˜ì§€ ëª»í•¨

---

**Status**: âœ… Phase 1-2 ì™„ë£Œ (Vitest âœ…, Sentry âœ…)  
**ë‹¤ìŒ ì‘ì—…**: Rate Limiting ì ìš© (Phase 1-3)
