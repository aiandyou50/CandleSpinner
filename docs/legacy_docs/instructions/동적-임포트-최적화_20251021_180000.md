# 명령 지시서: 동적 임포트 최적화

**작업 ID**: Phase 2-3  
**타임스탬프**: 2025-10-21 18:00:00  
**요청자**: User  
**담당**: AI Agent

---

## 📋 요청 사항

번들 크기 최적화를 위해 **동적 임포트(Dynamic Import)**를 구현합니다.

### 목표
- 주요 페이지 컴포넌트(Game, Deposit)를 **Lazy Loading**으로 변환
- React.lazy() + Suspense를 사용하여 초기 로딩 시간 단축
- 빌드 후 번들 분석으로 청크 분리 효과 확인

---

## 🎯 상세 지시사항

### 1. React.lazy() 적용 대상
- ✅ `Game` 컴포넌트 (src/components/Game.tsx)
- ✅ `Deposit` 컴포넌트 (src/components/Deposit.tsx)

### 2. Suspense Fallback UI
- 로딩 중일 때 표시할 간단한 로딩 화면 생성
- 스타일: 기존 다크 테마와 동일
- 내용: "로딩 중..." 메시지 + 스피너

### 3. 타입 안정성
- TypeScript 타입 검사 통과
- 기존 Props 타입 유지

### 4. 테스트 및 검증
- `npm test` 통과 확인
- `npm run build` 성공 확인
- `dist/stats.html`에서 번들 분리 확인

---

## 📝 구현 계획

| 단계 | 파일 | 작업 | 상태 |
|------|------|------|------|
| 1 | `src/App.tsx` | React.lazy() + Suspense 추가 | ⏳ |
| 2 | `src/App.tsx` | Suspense Fallback UI 생성 | ⏳ |
| 3 | `src/` | TypeScript 타입 검증 | ⏳ |
| 4 | `npm test` | 테스트 검증 | ⏳ |
| 5 | `npm run build` | 빌드 검증 | ⏳ |
| 6 | `docs/solutions/` | 해결 기록 작성 | ⏳ |

---

## 📌 참고 자료

### React.lazy() 문법
```tsx
const Game = lazy(() => import('./components/Game'));
const Deposit = lazy(() => import('./components/Deposit'));
```

### Suspense 사용
```tsx
<Suspense fallback={<LoadingScreen />}>
  {appMode === 'deposit' ? (
    <Deposit onBack={() => setAppMode('game')} />
  ) : (
    <Game onDepositClick={() => setAppMode('deposit')} />
  )}
</Suspense>
```

### Vite에서 청크 분리 자동화
- vite.config.ts의 `manualChunks` 설정이 자동으로 분리
- 동적 임포트된 컴포넌트 = 자동으로 별도 청크 파일 생성

---

## ✅ 완료 기준

- [ ] Game, Deposit 컴포넌트 lazy() 변환
- [ ] Suspense + Fallback UI 적용
- [ ] TypeScript 타입 검사: 0 errors
- [ ] npm test 통과 (12/12)
- [ ] npm run build 성공
- [ ] dist/stats.html에서 청크 분리 확인
- [ ] Git 커밋 완료
- [ ] 해결 기록 작성 완료

---

**Status**: 📋 지시서 생성 완료  
**다음 단계**: Step 3 - 코드 + 문서 동시 수정
