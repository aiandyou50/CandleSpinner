# 배포 실패 분석 및 원인 파악

**작성일:** 2025-10-26 21:10 UTC  
**상태:** 🔴 **배포 실패 분석 중**

---

## 📊 Tonscan 거래 분석

### **확인된 거래 기록**

```
시간: 20시간 전 (약 2025-10-26 01시 경)
거래 타입: Failed Transfer (실패)
거래 대상: buytn-bot.ton, testnet-market.ton, tnfaucet-bot.ton
상태: ❌ 모두 실패

잔액: 1,999999997 TON (매우 높음)
상태: Inactive (비활성)
```

### **실패 원인 분석**

| 거래 | 타입 | 금액 | 상태 | 원인 추정 |
|-----|------|------|------|---------|
| buytn-bot.ton | Failed Transfer | 0.05 TON | ❌ | 지갑 미초기화 |
| testnet-market.ton | Failed Transfer | 0.001 TON | ❌ | 지갑 미초기화 |
| tnfaucet-bot.ton | Failed Transfer | 0.01 TON | ❌ | 지갑 미초기화 |

---

## 🔴 **근본 원인: 지갑이 Inactive 상태**

### **문제 1: 지갑 미초기화**

```
상태: Inactive
의미: 지갑이 아직 블록체인에 등록되지 않음

이유:
- 프라이빗 키에서 생성한 지갑이 처음으로 활성화되는 상태
- 지갑을 처음 사용할 때는 누군가로부터 TON을 받아야 활성화됨
```

### **문제 2: 프라이빗 키-주소 불일치 (다시 확인)**

```
생성된 프라이빗 키로부터:
- 생성된 테스트넷 주소: kQAGRIZPtyLweOXMya_lkisdEENVZsaFeFpKbIy9zF7h84gF

제공된 주소:
- 0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g

❌ 주소가 다릅니다!
```

---

## 🔍 **상황 정리**

### **지갑 상태**
```
잔액: 1,999,999,997 TON (매우 충분함)
상태: Inactive (비활성 상태)

왜 Inactive인가?
→ 이 주소가 지금까지 아무 거래도 없었음
→ 처음으로 활성화되어야 함
```

### **배포 시도 실패 이유**

1. ❌ **프라이빗 키와 주소 불일치**
   - 제공된 프라이빗 키로 생성한 주소 ≠ 제공된 테스트넷 주소
   - 따라서 서명이 유효하지 않음

2. ❌ **지갑 미초기화**
   - 지갑이 Inactive 상태
   - 배포 전에 지갑을 활성화해야 함

3. ❌ **잘못된 거래 메시지**
   - 서명이 유효하지 않으면 거래가 실패함
   - RPC가 거래를 거부함

---

## ✅ **해결 방법**

### **Step 1: 올바른 프라이빗 키 확인**

제공된 주소로부터 역으로 올바른 프라이빗 키를 찾아야 합니다.

```
테스트넷 주소: 0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g
이 주소를 생성하는 올바른 프라이빗 키가 필요
```

### **Step 2: 지갑 활성화**

지갑을 활성화하려면:

```
옵션 A: 다른 지갑에서 TON 전송 (0.1 TON 이상)
- Tonscan Testnet Faucet에서 TON 받기
- 다른 지갑에서 전송

옵션 B: 이미 있는 잔액 사용
- 지갑에 1,999,999,997 TON이 있음
- 하지만 Inactive 상태이므로 활성화 필요
```

---

## 🎯 **즉시 실행 계획**

### **1단계: 올바른 니모닉 재확인**

```
현재 상황:
❌ 제공된 니모닉과 주소가 일치하지 않음

필요한 작업:
1. 지갑에서 실제 니모닉 다시 확인
2. 또는 지갑에서 프라이빗 키 직접 export
3. 또는 주소가 생성된 니모닉 확인
```

### **2단계: 프라이빗 키 재검증**

```
방법 1: 정확한 니모닉 제공
- 올바른 니모닉으로 프라이빗 키 재생성

방법 2: 프라이빗 키 직접 제공
- 지갑에서 프라이빗 키 export

방법 3: 새 테스트 지갑 사용
- 표준 derivation path로 새 지갑 생성
- 테스트넷에서 테스트
```

### **3단계: 지갑 활성화**

```
Tonscan Testnet Faucet 사용:
1. https://testnet.tonscan.org 방문
2. 지갑 주소 입력
3. 테스트 TON 받기 (자동 활성화)
```

---

## 📋 **확인 체크리스트**

- [ ] Tonscan에서 지갑 주소 확인
  - 현재: `0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g`
  - 상태: Inactive

- [ ] 프라이빗 키-주소 검증
  - 현재: 불일치 ❌

- [ ] 지갑 활성화 필요
  - 방법: Testnet Faucet 또는 TON 전송

---

## 🔧 **기술적 근거**

### **TON 지갑 초기화**

TON 블록체인에서:
1. 프라이빗 키로부터 공개키 생성
2. 공개키로부터 지갑 주소 생성
3. 지갑 활성화 (Init Transaction)
4. 초기 거래 전송 가능

```
현재 상태: Step 2 완료, Step 3 필요
```

### **왜 거래가 실패했나?**

```
1. 지갑이 Inactive → Init 필요
2. 프라이빗 키와 주소 불일치 → 서명 실패
3. 두 가지 모두 해결해야 배포 가능
```

---

## 💡 **권장 사항**

### **즉시**
1. 지갑의 실제 니모닉 또는 프라이빗 키 확인
2. Tonscan에서 정확한 주소와 상태 다시 확인
3. 지갑 활성화 (Testnet Faucet 사용)

### **배포 재시도**
1. 올바른 프라이빗 키로 환경 변수 업데이트
2. 지갑 활성화 후 배포 다시 시도
3. Tonscan에서 거래 상태 모니터링

---

*분석 완료: 2025-10-26 21:10 UTC*
