# MVP v2 테스트 체크리스트

**작성일**: 2025-11-01  
**버전**: v2.0.0

---

## 1. 프론트엔드 테스트

### 기본 UI
- [ ] 페이지 로드 정상 (Gradient 배경, 타이틀 표시)
- [ ] TON Connect 버튼 렌더링
- [ ] 지갑 미연결 시 "Connect your TON wallet" 메시지 표시

### TON Connect
- [ ] 지갑 연결 모달 열림
- [ ] 지갑 연결 성공 (주소 표시: `UQxx...xxxx`)
- [ ] 지갑 연결 후 크레딧 표시 (0 CSPIN)
- [ ] 지갑 해제 기능 동작

---

## 2. 백엔드 API 테스트

### GET /api/credit
```powershell
# 테스트 요청
curl http://localhost:8787/api/credit?address=UQBdBXl...

# 예상 응답
{"success":true,"credit":0}
```
- [ ] 새 지갑 조회 시 0 반환
- [ ] 유효하지 않은 주소 시 400 에러

### POST /api/verify-deposit
```powershell
# 테스트 요청 (임시)
curl -X POST http://localhost:8787/api/verify-deposit \
  -H "Content-Type: application/json" \
  -d '{"walletAddress":"UQBdBXl...","txHash":"test_hash"}'
```
- [ ] TonCenter 트랜잭션 조회
- [ ] 입금 확인 후 크레딧 증가
- [ ] 잘못된 트랜잭션 시 에러

### POST /api/spin
```powershell
# 테스트 요청
curl -X POST http://localhost:8787/api/spin \
  -H "Content-Type: application/json" \
  -d '{"walletAddress":"UQBdBXl..."}'
```
- [ ] 크레딧 부족 시 400 에러
- [ ] 크레딧 차감 (1 CSPIN)
- [ ] 랜덤 슬롯 결과 반환 (3x3)
- [ ] 당첨 시 크레딧 증가

### POST /api/withdraw
```powershell
# 테스트 요청
curl -X POST http://localhost:8787/api/withdraw \
  -H "Content-Type: application/json" \
  -d '{"walletAddress":"UQBdBXl...","amount":10}'
```
- [ ] 크레딧 부족 시 400 에러
- [ ] 크레딧 차감
- [ ] Jetton Transfer 트랜잭션 전송
- [ ] 트랜잭션 해시 반환

---

## 3. 통합 플로우 테스트

### Scenario 1: 입금 → 게임 → 인출
1. [ ] 지갑 연결
2. [ ] 10 CSPIN 입금 요청
3. [ ] 트랜잭션 승인
4. [ ] 크레딧 10 증가 확인
5. [ ] SPIN 버튼 클릭 (1 CSPIN 차감)
6. [ ] 슬롯 결과 표시
7. [ ] 당첨 시 크레딧 증가 확인
8. [ ] 5 CSPIN 인출 요청
9. [ ] 크레딧 5 차감 확인
10. [ ] 지갑에 CSPIN 수신 확인

### Scenario 2: 크레딧 부족
1. [ ] 지갑 연결 (크레딧 0)
2. [ ] SPIN 버튼 비활성화 확인
3. [ ] SPIN 클릭 시 "Insufficient credit" 에러

### Scenario 3: 다중 게임
1. [ ] 10 CSPIN 입금
2. [ ] 10번 연속 SPIN
3. [ ] 크레딧 정확히 차감되는지 확인
4. [ ] 당첨 크레딧 누적 확인

---

## 4. 보안 테스트

### 크레딧 위변조 방지
- [ ] 브라우저 콘솔에서 크레딧 수정 불가
- [ ] API 요청으로만 크레딧 변경 가능
- [ ] KV 저장소 직접 접근 불가

### API 인증
- [ ] 지갑 주소 검증
- [ ] 트랜잭션 해시 검증
- [ ] 중복 입금 방지 (동일 txHash 재사용 불가)

---

## 5. 성능 테스트

- [ ] 페이지 로드 시간 < 2초
- [ ] API 응답 시간 < 500ms
- [ ] 슬롯 애니메이션 부드러움 (60fps)
- [ ] 지갑 연결 시간 < 3초

---

## 6. 브라우저 호환성

- [ ] Chrome (최신)
- [ ] Firefox (최신)
- [ ] Safari (최신)
- [ ] Mobile Safari (iOS)
- [ ] Chrome Mobile (Android)

---

## 7. 알려진 제한사항

### MVP v2 제외 기능
- ⚠️ 실제 Jetton Transfer 서명 (임시 구현)
- ⚠️ Jetton Wallet 주소 derive
- ⚠️ 트랜잭션 BOC 파싱
- ⚠️ seqno 관리
- ⚠️ 레이트 리밋
- ⚠️ 애니메이션 효과
- ⚠️ 리더보드

### 향후 구현 예정
- Phase 2: WalletContractV5R1 완전 구현
- Phase 2: 스마트 컨트랙트 기반 인출
- Phase 3: 고급 게임 모드

---

**통과 기준**: 
- 섹션 1, 2, 3의 모든 체크박스 ✅
- 섹션 4의 핵심 항목 ✅
- 섹션 5의 성능 기준 충족 ✅

**테스트 완료 시**: [배포 실행](./[가이드]_MVP-v2-배포-가이드_20251101.md)
