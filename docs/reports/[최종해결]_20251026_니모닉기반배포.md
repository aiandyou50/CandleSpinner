# 🚀 니모닉 기반 스마트컨트랙트 배포

**작성일:** 2025-10-26 21:40 UTC  
**상태:** 🟢 **니모닉으로 배포 가능**

---

## 📊 상황 분석 (최종)

```
🔍 탐색 결과:

✅ 제공된 니모닉
   → 메인넷 주소 생성: UQC2DJ8yOisLaWh7J7xHAx6yppyZCoyf5cR5vbOVJcwVQZdC
   → 테스트넷 주소 생성 불가

❌ 테스트넷 주소 (0QB_...)
   → 제공된 니모닉과 매칭 없음
   → 다른 니모닉에서 생성된 주소

결론: 테스트넷 주소와 메인넷 주소는 서로 다른 니모닉에서 생성됨
```

---

## ✅ 해결책 (3가지 옵션)

### **옵션 1: 메인넷 주소로 배포 (권장 - 가장 빠름)**

현재 프라이빗 키는 메인넷 주소와 100% 일치합니다.

```powershell
# 메인넷 주소로 설정
cd c:\Users\x0051\Desktop\DEV\CandleSpinner\contracts

# .env.local 수정
# DEPLOYER_WALLET_ADDRESS_TESTNET=UQC2DJ8yOisLaWh7J7xHAx6yppyZCoyf5cR5vbOVJcwVQZdC

# 배포
npm run build
npx blueprint deploy --privkey "14ebd4df03b4ec8b15ad46008cc2102ea9fc83b6561c5e263f8822fd58ced5c64f917eef0fdd86900619af6183bb2e9bfc063f6ea082d00c86f046d7d434765b" --testnet
```

---

### **옵션 2: 테스트넷 주소의 올바른 니모닉 찾기**

테스트넷 지갑 (0QB_...)의 니모닉을 찾아야 합니다.

**단계:**

```
1. 테스트넷 지갑이 있는 지갑 애플리케이션 열기
   (예: Tonkeeper, TonHub, TonWallet)

2. 지갑 설정에서 "니모닉 보기" 또는 "Secret Export" 선택

3. 24단어 니모닉 복사

4. 아래 명령으로 검증:
```

```powershell
cd c:\Users\x0051\Desktop\DEV\CandleSpinner

# 테스트넷 지갑의 니모닉으로 프라이빗 키 생성
node wallet-tools/mnemonic-to-key.mjs "[테스트넷 지갑의 24단어 니모닉]"

# 출력된 Non-Bounceable 주소가 0QB_...인지 확인
```

5. 프라이빗 키를 .env.local에 입력

---

### **옵션 3: 테스트넷 지갑 주소로 배포 (프라이빗 키 없이)**

지갑 애플리케이션의 서명을 사용하여 배포합니다.

---

## 🎯 권장: 옵션 1 (메인넷 주소로 배포)

### **Step 1: 환경 변수 수정**

```powershell
# 파일 열기: contracts\.env.local

# 이 줄을 찾아:
# DEPLOYER_WALLET_ADDRESS_TESTNET=0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g

# 다음으로 변경:
# DEPLOYER_WALLET_ADDRESS_TESTNET=UQC2DJ8yOisLaWh7J7xHAx6yppyZCoyf5cR5vbOVJcwVQZdC

# 저장 (Ctrl+S)
```

### **Step 2: 검증**

```powershell
cd c:\Users\x0051\Desktop\DEV\CandleSpinner\contracts
npm run check-env
```

**예상 출력:**
```
✅ CSPIN_JETTON
✅ GAME_JETTON_WALLET
✅ DEPLOYER_PRIVATE_KEY
✅ DEPLOYER_WALLET_ADDRESS_TESTNET
✅ DEPLOYER_WALLET_ADDRESS_MAINNET
✅ 모든 환경이 준비되었습니다!
```

### **Step 3: 빌드**

```powershell
npm run build
```

### **Step 4: 배포 (프라이빗 키 사용)**

```powershell
npx blueprint deploy --privkey "14ebd4df03b4ec8b15ad46008cc2102ea9fc83b6561c5e263f8822fd58ced5c64f917eef0fdd86900619af6183bb2e9bfc063f6ea082d00c86f046d7d434765b" --testnet
```

### **Step 5: Tonscan 확인**

```
https://testnet.tonscan.org/address/UQC2DJ8yOisLaWh7J7xHAx6yppyZCoyf5cR5vbOVJcwVQZdC
```

---

## 💡 왜 두 주소가 다른가?

```
일반적인 상황:

지갑 애플리케이션 (Tonkeeper, TonHub 등)
├─ 메인넷 주소: UQC2DJ8yOisLaWh7J7xHAx6yppyZCoyf5cR5vbOVJcwVQZdC
├─ 테스트넷 주소: 0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g
└─ 니모닉: 각각 다를 수 있음

이유:
1. 다른 지갑에서 생성되었을 수 있음
2. 다른 derivation path 사용
3. 지갑 버전 다름 (W5, W4, W3, W2)
4. Workchain 다름 (0 vs -1)
```

---

## 🔧 만약 Option 2를 선택한다면?

### **테스트넷 니모닉 검증 스크립트**

```powershell
cd c:\Users\x0051\Desktop\DEV\CandleSpinner

# 테스트넷 지갑의 니모닉 입력
node wallet-tools/mnemonic-to-key.mjs "word1 word2 word3 ... word24"
```

**출력 확인:**

```
Wallet Address (V5R1 - Telegram TON Wallet):
Non-Bounceable (UQ...): 0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g  ✅ 일치하면 이것!

JSON Output:
{
  "privateKey": "[64 bytes hex]",
  ...
}
```

프라이빗 키를 복사하여 .env.local에 입력:

```
DEPLOYER_PRIVATE_KEY=[복사한 프라이빗 키]
```

---

## 📋 최종 체크리스트

### **Option 1 사용 시 (권장)**

- [ ] .env.local 수정: DEPLOYER_WALLET_ADDRESS_TESTNET = 메인넷 주소
- [ ] npm run check-env: 모두 ✅
- [ ] npm run build: 성공
- [ ] Blueprint deploy 실행
- [ ] Tonscan 확인

### **Option 2 사용 시**

- [ ] 테스트넷 지갑의 니모닉 확인
- [ ] wallet-tools/mnemonic-to-key.mjs로 검증
- [ ] 프라이빗 키 복사
- [ ] .env.local 업데이트
- [ ] npm run check-env 확인
- [ ] Blueprint deploy 실행

---

## 🚀 최종 명령어

### **Option 1 (메인넷 주소)**

```powershell
# 1. 환경 변수 수정 후
cd c:\Users\x0051\Desktop\DEV\CandleSpinner\contracts

# 2. 빌드
npm run build

# 3. 배포
npx blueprint deploy --privkey "14ebd4df03b4ec8b15ad46008cc2102ea9fc83b6561c5e263f8822fd58ced5c64f917eef0fdd86900619af6183bb2e9bfc063f6ea082d00c86f046d7d434765b" --testnet

# 4. 결과 확인
# https://testnet.tonscan.org/address/UQC2DJ8yOisLaWh7J7xHAx6yppyZCoyf5cR5vbOVJcwVQZdC
```

### **Option 2 (테스트넷 니모닉 검증)**

```powershell
cd c:\Users\x0051\Desktop\DEV\CandleSpinner

# 테스트넷 지갑 니모닉으로 프라이빗 키 생성
node wallet-tools/mnemonic-to-key.mjs "[테스트넷_니모닉_24단어]"

# 출력된 프라이빗 키를 .env.local의 DEPLOYER_PRIVATE_KEY에 입력

# 그 후 배포
cd contracts
npm run build
npx blueprint deploy --privkey "[검증된_프라이빗_키]" --testnet
```

---

## 📊 현재 상태

```
✅ 프라이빗 키: 검증됨 (메인넷 주소와 완벽 매칭)
✅ 메인넷 주소: UQC2DJ8yOisLaWh7J7xHAx6yppyZCoyf5cR5vbOVJcwVQZdC
✅ 스마트컨트랙트: 컴파일됨 (769 bytes)
✅ 배포 도구: Blueprint CLI 준비됨

❌ 테스트넷 주소: 제공된 니모닉과 불일치
   → Option 1 또는 Option 2로 해결 가능

🟢 상태: 즉시 배포 가능!
```

---

**✅ 권장: Option 1로 메인넷 주소로 배포하세요!**

*가이드: 2025-10-26 21:40 UTC*
