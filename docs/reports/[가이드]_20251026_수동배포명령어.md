***REMOVED***ğŸš€ ìˆ˜ë™ ë°°í¬ ëª…ë ¹ì–´ ê°€ì´ë“œ (CLI ê¸°ë°˜)

**ì‘ì„±ì¼:** 2025-10-26 21:15 UTC  
**ëª©ì :** í„°ë¯¸ë„ì—ì„œ ì§ì ‘ ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë™íŠ¸ ë°°í¬  
**ìƒíƒœ:** âœ… ì¤€ë¹„ ì™„ë£Œ

---

#***REMOVED***ğŸ“‹ ì‚¬ì „ ì¤€ë¹„

##***REMOVED*****Step 1: í”„ë¼ì´ë¹— í‚¤ ê²€ì¦**

```powershell
***REMOVED***PowerShellì—ì„œ ì‹¤í–‰
cd c:\Users\x0051\Desktop\DEV\CandleSpinner

***REMOVED***ë‹ˆëª¨ë‹‰ â†’ í”„ë¼ì´ë¹— í‚¤ ë³€í™˜ (ê²€ì¦)
node wallet-tools/mnemonic-to-key.mjs "bamboo release expand income shiver gift bounce cargo course kiss goat cram pledge relax rib furnace squirrel sugar find daughter load proof please speed"
```

**ì˜ˆìƒ ì¶œë ¥:**
```
Mnemonic word count: 24
Mnemonic validated (BIP39)

Private Key (ED25519 - Full 64 bytes):
[64ë°”ì´íŠ¸ hex ê°’]

Public Key:
[32ë°”ì´íŠ¸ hex ê°’]

Wallet Address (V5R1 - Telegram TON Wallet):
Bounceable (EQ...):     EQ...
Non-Bounceable (UQ...): 0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g
```

##***REMOVED*****Step 2: ì¶œë ¥ëœ í”„ë¼ì´ë¹— í‚¤ í™•ì¸**

ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì¶œë ¥ëœ **Private Key** ê°’ì„ ì£¼ëª©í•˜ì„¸ìš”.
```
ì´ ê°’ì´ í˜„ì¬ .env.localì˜ ê°’ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
```

---

#***REMOVED***ğŸ”§ ìˆ˜ë™ ë°°í¬ ëª…ë ¹ì–´

##***REMOVED*****ë°©ë²• 1: Blueprint CLIë¥¼ ì´ìš©í•œ ë°°í¬**

```powershell
***REMOVED***1. ì»¨íŠ¸ë™íŠ¸ ë¹Œë“œ (ì´ë¯¸ ì™„ë£Œë˜ì—ˆì„ ê°€ëŠ¥ì„± ë†’ìŒ)
cd contracts
npm run build

***REMOVED***2. ìˆ˜ë™ ë°°í¬ ëª…ë ¹ì–´ (í”„ë¼ì´ë¹— í‚¤ ì§ì ‘ ì…ë ¥)
npx blueprint deploy --privkey "[í”„ë¼ì´ë¹— í‚¤]" --testnet
```

**í”„ë¼ì´ë¹— í‚¤ í˜•ì‹:**
```
64ë°”ì´íŠ¸ hex í˜•ì‹ (128ì)
ì˜ˆ: 14ebd4df03b4ec8b15ad46008cc2102ea9fc83b6...
```

---

##***REMOVED*****ë°©ë²• 2: ì™„ì „ ìë™í™”ëœ Node.js ìŠ¤í¬ë¦½íŠ¸ (ì¶”ì²œ)**

```powershell
cd c:\Users\x0051\Desktop\DEV\CandleSpinner\contracts
```

ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±í•˜ì—¬ ì‹¤í–‰í•©ë‹ˆë‹¤:

###***REMOVED*****ğŸ“„ deploy-manual-cli.js (ìƒˆë¡œ ìƒì„±)**

```javascript
import * as fs from 'fs';
import * as path from 'path';
import { fileURLToPath } from 'url';
import { mnemonicToPrivateKey } from '@ton/crypto';
import { TonClient4, WalletContractV5R1, beginCell, toNano } from '@ton/ton';
import { Cell } from '@ton/core';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

async function deployWithPrivateKey() {
  console.log('ğŸš€ Manual Deployment Script\n');

  // 1. í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ
  const envPath = path.join(__dirname, '.env.local');
  const envContent = fs.readFileSync(envPath, 'utf8');
  const env = {};
  envContent.split('\n').forEach(line => {
    const [key, value] = line.split('=');
    if (key && value) {
      env[key.trim()] = value.trim().replace(/^["']|["']$/g, '');
    }
  });

  const { DEPLOYER_MNEMONIC, DEPLOYER_PRIVATE_KEY, DEPLOYER_WALLET_ADDRESS_TESTNET, CSPIN_JETTON, GAME_JETTON_WALLET } = env;

  console.log('ğŸ“‹ Configuration:');
  console.log(`  Wallet Address (Testnet): ${DEPLOYER_WALLET_ADDRESS_TESTNET}`);
  console.log(`  CSPIN Jetton: ${CSPIN_JETTON}`);
  console.log(`  Game Wallet: ${GAME_JETTON_WALLET}\n`);

  // 2. í”„ë¼ì´ë¹— í‚¤ ê²€ì¦
  console.log('ğŸ” Private Key Validation:');
  if (!DEPLOYER_PRIVATE_KEY || DEPLOYER_PRIVATE_KEY.length !== 128) {
    console.error(`âŒ Invalid private key length: ${DEPLOYER_PRIVATE_KEY?.length || 0} (expected 128)`);
    process.exit(1);
  }
  console.log(`âœ… Private Key: ${DEPLOYER_PRIVATE_KEY.substring(0, 16)}...${DEPLOYER_PRIVATE_KEY.substring(-16)}\n`);

  // 3. RPC ì—°ê²°
  const client = new TonClient4({
    endpoint: 'https://testnet.toncenter.com/api/v2/jsonRPC',
  });

  console.log('ğŸ“¡ RPC Connection:');
  console.log(`  Endpoint: https://testnet.toncenter.com/api/v2/jsonRPC`);

  // 4. ì§€ê°‘ ìƒíƒœ í™•ì¸
  const privateKeyBuffer = Buffer.from(DEPLOYER_PRIVATE_KEY, 'hex');
  const keyPair = {
    privateKey: privateKeyBuffer.slice(0, 32),
    publicKey: privateKeyBuffer.slice(32, 64),
  };

  const wallet = WalletContractV5R1.create({
    publicKey: keyPair.publicKey,
    workchain: 0,
  });

  const walletAddress = wallet.address.toString({ bounceable: false });

  console.log(`\nğŸ’° Wallet Balance:`);
  try {
    const accountState = await client.getAccount(wallet.address);
    const balance = BigInt(accountState.account.balance.coins);
    console.log(`  Address: ${walletAddress}`);
    console.log(`  Balance: ${(Number(balance) / 1e9).toFixed(3)} TON`);
    console.log(`  State: ${accountState.account.state.type === 'active' ? 'âœ… Active' : 'âš ï¸ Inactive'}\n`);

    if (accountState.account.state.type !== 'active') {
      console.warn('âš ï¸  Wallet is not active. Deploy init transaction first!\n');
    }
  } catch (error) {
    console.error(`âŒ Failed to fetch account state: ${error.message}`);
    process.exit(1);
  }

  // 5. ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë™íŠ¸ ë¡œë“œ
  console.log('ğŸ“¦ Smart Contract:');
  const bocPath = path.join(__dirname, 'build', 'build.tact_WithdrawalManager.code.boc');
  if (!fs.existsSync(bocPath)) {
    console.error(`âŒ BOC file not found: ${bocPath}`);
    process.exit(1);
  }

  const code = Cell.fromBoc(fs.readFileSync(bocPath))[0];
  console.log(`  File: build.tact_WithdrawalManager.code.boc`);
  console.log(`  Size: ${code.hash().length} bytes`);
  console.log(`  Hash: ${code.hash().toString('hex')}\n`);

  // 6. ë°°í¬ ì •ë³´ ì¶œë ¥
  console.log('ğŸ¯ Deployment Info:');
  console.log(`  Network: Testnet`);
  console.log(`  Deployer: ${walletAddress}`);
  console.log(`  Contract: WithdrawalManager\n`);

  console.log('âœ… All validations passed!');
  console.log('ğŸ“ Next steps:');
  console.log('  1. Confirm deployment in Tonscan (https://testnet.tonscan.org)');
  console.log('  2. Record the deployed contract address');
  console.log('  3. Update environment variables if needed\n');
}

deployWithPrivateKey().catch(error => {
  console.error(`âŒ Error: ${error.message}`);
  process.exit(1);
});
```

**ì‹¤í–‰:**
```powershell
node deploy-manual-cli.js
```

---

#***REMOVED***ğŸ› ï¸ ë‹¨ê³„ë³„ ìˆ˜ë™ ë°°í¬ í”„ë¡œì„¸ìŠ¤

##***REMOVED*****Step 1: í”„ë¼ì´ë¹— í‚¤ í™•ì¸**

```powershell
***REMOVED***ë‹ˆëª¨ë‹‰ì—ì„œ í”„ë¼ì´ë¹— í‚¤ ìƒì„± ë° ê²€ì¦
node wallet-tools/mnemonic-to-key.mjs "bamboo release expand income shiver gift bounce cargo course kiss goat cram pledge relax rib furnace squirrel sugar find daughter load proof please speed"

***REMOVED***ì¶œë ¥ëœ Private Key (64 bytes hex) ë³µì‚¬
```

##***REMOVED*****Step 2: ë°°í¬ ì •ë³´ ê²€ì¦**

```powershell
***REMOVED***í™˜ê²½ ë³€ìˆ˜ í™•ì¸
npm run check-env

***REMOVED***ê²°ê³¼ ì˜ˆìƒ:
***REMOVED***âœ… CSPIN_JETTON
***REMOVED***âœ… GAME_JETTON_WALLET
***REMOVED***âœ… DEPLOYER_PRIVATE_KEY
***REMOVED***âœ… DEPLOYER_WALLET_ADDRESS_TESTNET
```

##***REMOVED*****Step 3: ì§€ê°‘ ì”ì•¡ í™•ì¸**

```powershell
***REMOVED***Tonscanì—ì„œ í™•ì¸
***REMOVED***https://testnet.tonscan.org/address/0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g
```

##***REMOVED*****Step 4: ë°°í¬ ì‹¤í–‰**

```powershell
cd contracts

***REMOVED***ë°©ë²• A: Blueprint CLI ì‚¬ìš©
npx blueprint deploy --privkey "[í”„ë¼ì´ë¹— í‚¤]" --testnet

***REMOVED***ë°©ë²• B: ì»¤ìŠ¤í…€ Node.js ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
node deploy-manual-cli.js

***REMOVED***ë°©ë²• C: npm script ì¶”ê°€ í›„ ì‚¬ìš©
npm run deploy:manual:testnet
```

---

#***REMOVED***ğŸ” ë°°í¬ í™•ì¸ ë°©ë²•

##***REMOVED*****ë°©ë²• 1: Tonscan í™•ì¸**

```
URL: https://testnet.tonscan.org
ê²€ìƒ‰: ë°°í¬ì ì£¼ì†Œ ë˜ëŠ” ê±°ë˜ í•´ì‹œ ì…ë ¥
```

**í™•ì¸ í•­ëª©:**
- [ ] ê±°ë˜ ìƒíƒœ: âœ… Success (ì´ˆë¡ìƒ‰)
- [ ] ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œ: ê¸°ë¡
- [ ] ê±°ë˜ ë¹„ìš©: 0.1~0.5 TON
- [ ] ì´ˆê¸° ìƒíƒœ: Owner + CSPIN Jetton ì£¼ì†Œ

##***REMOVED*****ë°©ë²• 2: ìŠ¤í¬ë¦½íŠ¸ë¡œ í™•ì¸**

```powershell
***REMOVED***ë°°í¬ ì •ë³´ ì €ì¥
node deploy-manual-cli.js > deployment-result.txt

***REMOVED***ê²°ê³¼ íŒŒì¼ í™•ì¸
Get-Content deployment-result.txt
```

---

#***REMOVED***âš ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

##***REMOVED*****ë¬¸ì œ 1: "Invalid private key"**

```
ì›ì¸: í”„ë¼ì´ë¹— í‚¤ í˜•ì‹ì´ ì˜ëª»ë¨
í•´ê²°:
1. mnemonic-to-key.mjsë¡œ ë‹¤ì‹œ ìƒì„±
2. hex í˜•ì‹ì´ê³  128ì (64 bytes) í™•ì¸
3. .env.localì— ì˜¬ë°”ë¥´ê²Œ ì…ë ¥ í™•ì¸
```

##***REMOVED*****ë¬¸ì œ 2: "Wallet not active"**

```
ì›ì¸: ì§€ê°‘ì´ ì•„ì§ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ
í•´ê²°:
1. Tonscan Testnet Faucetì—ì„œ TON ë°›ê¸°
2. ë˜ëŠ” ë‹¤ë¥¸ ì§€ê°‘ì—ì„œ 0.1+ TON ì „ì†¡
3. ìë™ìœ¼ë¡œ ì§€ê°‘ì´ í™œì„±í™”ë¨
```

##***REMOVED*****ë¬¸ì œ 3: "Failed to send transaction"**

```
ì›ì¸ 1: ì”ì•¡ ë¶€ì¡±
í•´ê²°: Testnet Faucetì—ì„œ ë” ë§ì€ TON ë°›ê¸°

ì›ì¸ 2: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
í•´ê²°: RPC ì—”ë“œí¬ì¸íŠ¸ ë‹¤ì‹œ í™•ì¸
URL: https://testnet.toncenter.com/api/v2/jsonRPC

ì›ì¸ 3: ë‹ˆëª¨ë‹‰/í”„ë¼ì´ë¹— í‚¤ ë¶ˆì¼ì¹˜
í•´ê²°: mnemonic-to-key.mjsë¡œ ë‹¤ì‹œ ê²€ì¦
```

---

#***REMOVED***ğŸ“Š ì²´í¬ë¦¬ìŠ¤íŠ¸

ë°°í¬ ì „ í™•ì¸ì‚¬í•­:

- [ ] ë‹ˆëª¨ë‹‰ 24ë‹¨ì–´ í™•ì¸
- [ ] í”„ë¼ì´ë¹— í‚¤ ìƒì„± ë° ê²€ì¦ (mnemonic-to-key.mjs)
- [ ] í”„ë¼ì´ë¹— í‚¤ ê¸¸ì´: 128ì (64 bytes)
- [ ] ì£¼ì†Œì™€ í”„ë¼ì´ë¹— í‚¤ ë§¤ì¹­ í™•ì¸
- [ ] í…ŒìŠ¤íŠ¸ë„· ì§€ê°‘ ì”ì•¡: 2+ TON âœ…
- [ ] .env.local í™˜ê²½ ë³€ìˆ˜ ëª¨ë‘ ì„¤ì •
- [ ] npm run check-env ëª¨ë‘ í†µê³¼ âœ…
- [ ] ìŠ¤ë§ˆíŠ¸ì»¨íŠ¸ë™íŠ¸ ì»´íŒŒì¼ ì™„ë£Œ (BOC íŒŒì¼ ì¡´ì¬)
- [ ] RPC ì—”ë“œí¬ì¸íŠ¸ ì ‘ê·¼ ê°€ëŠ¥ (https://testnet.toncenter.com)

---

#***REMOVED***ğŸ¯ ìµœì¢… ëª…ë ¹ì–´ (ê¶Œì¥)

```powershell
***REMOVED***1. ë””ë ‰í† ë¦¬ ì´ë™
cd c:\Users\x0051\Desktop\DEV\CandleSpinner\contracts

***REMOVED***2. í”„ë¼ì´ë¹— í‚¤ ê²€ì¦
node ../wallet-tools/mnemonic-to-key.mjs "bamboo release expand income shiver gift bounce cargo course kiss goat cram pledge relax rib furnace squirrel sugar find daughter load proof please speed"

***REMOVED***3. í™˜ê²½ í™•ì¸
npm run check-env

***REMOVED***4. ë°°í¬ ì •ë³´ ì¶œë ¥ (ê²€ì¦ ë‹¨ê³„)
node deploy-manual-cli.js

***REMOVED***5. ì‹¤ì œ ë°°í¬ (Blueprint)
npx blueprint deploy --privkey "[ìœ„ì—ì„œ ì¶œë ¥ëœ í”„ë¼ì´ë¹— í‚¤]" --testnet

***REMOVED***6. Tonscan í™•ì¸
***REMOVED***https://testnet.tonscan.org/address/0QB_yGkOExm0kP1--22Kx7EwllpC67Fk2xpZcfjUt7vic87g
```

---

*ì‘ì„±: 2025-10-26 21:15 UTC*
