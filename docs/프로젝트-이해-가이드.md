# ğŸ¯ CandleSpinner í”„ë¡œì íŠ¸ ì´í•´ë¥¼ ìœ„í•œ í•„ìˆ˜ ì •ë³´

**ì‘ì„±ì¼**: 2025-11-10  
**ëŒ€ìƒ**: ì‹ ê·œ ê°œë°œì / AI ì—ì´ì „íŠ¸  
**ëª©ì **: í”„ë¡œì íŠ¸ ë¹ ë¥¸ ì˜¨ë³´ë”©

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#2-ê¸°ìˆ -ìŠ¤íƒ)
3. [ì•„í‚¤í…ì²˜](#3-ì•„í‚¤í…ì²˜)
4. [í•µì‹¬ ê°œë…](#4-í•µì‹¬-ê°œë…)
5. [ë””ë ‰í„°ë¦¬ êµ¬ì¡°](#5-ë””ë ‰í„°ë¦¬-êµ¬ì¡°)
6. [í•„ìˆ˜ ë¬¸ì„œ](#6-í•„ìˆ˜-ë¬¸ì„œ)
7. [ê°œë°œ í™˜ê²½ ì„¤ì •](#7-ê°œë°œ-í™˜ê²½-ì„¤ì •)
8. [ì£¼ìš” ì›Œí¬í”Œë¡œìš°](#8-ì£¼ìš”-ì›Œí¬í”Œë¡œìš°)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### ğŸ° CandleSpinnerë€?

**TON ë¸”ë¡ì²´ì¸ ê¸°ë°˜ ì„œë²„ë¦¬ìŠ¤ ìŠ¬ë¡¯ë¨¸ì‹  ê²Œì„**

- **ê²Œì„ í† í°**: CSPIN (Jetton - TON í‘œì¤€ í† í°)
- **ì§€ê°‘ ì—°ë™**: TON Connect
- **í˜¸ìŠ¤íŒ…**: Cloudflare Pages + Workers
- **ê²°ì œ**: ì˜¨ì²´ì¸ Jetton Transfer
- **ê³µì •ì„±**: Provably Fair ì•Œê³ ë¦¬ì¦˜

### ğŸ¯ í•µì‹¬ ê°€ì¹˜

1. **ì™„ì „í•œ íƒˆì¤‘ì•™í™”**: ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì—†ì´ TON ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ í™œìš©
2. **ì„œë²„ë¦¬ìŠ¤**: ë³„ë„ ì„œë²„ ì—†ì´ Cloudflare Workersë¡œ ë°±ì—”ë“œ ì²˜ë¦¬
3. **íˆ¬ëª…ì„±**: ëª¨ë“  íŠ¸ëœì­ì…˜ì´ ë¸”ë¡ì²´ì¸ì— ê¸°ë¡
4. **ê¸€ë¡œë²Œ**: 9ê°œ ì–¸ì–´ ì§€ì› (i18next)

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

### Frontend
```json
{
  "í”„ë ˆì„ì›Œí¬": "React 18 + TypeScript",
  "ë¹Œë“œ ë„êµ¬": "Vite 5",
  "ìŠ¤íƒ€ì¼ë§": "Tailwind CSS + Material-UI v7",
  "ì• ë‹ˆë©”ì´ì…˜": "Framer Motion",
  "ë¼ìš°íŒ…": "React Router v7",
  "ë‹¤êµ­ì–´": "i18next + react-i18next"
}
```

### Blockchain
```json
{
  "ë„¤íŠ¸ì›Œí¬": "TON Mainnet",
  "ì§€ê°‘ ì—°ë™": "@tonconnect/ui-react",
  "SDK": "@ton/ton, @ton/crypto",
  "RPC": "TonCenter API v2/v3",
  "í† í° í‘œì¤€": "TEP-74 (Jetton)"
}
```

### Backend (Serverless)
```json
{
  "í”Œë«í¼": "Cloudflare Workers",
  "ë°°í¬": "Cloudflare Pages",
  "API": "Functions (Edge Runtime)",
  "í™˜ê²½ë³€ìˆ˜": "Workers Secrets"
}
```

### ê°œë°œ ë„êµ¬
```json
{
  "íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €": "npm",
  "íƒ€ì…ìŠ¤í¬ë¦½íŠ¸": "v5.6",
  "ë¦°í„°": "ESLint (ë‚´ì¥)",
  "í¬ë§¤í„°": "Prettier (ì„ íƒ)"
}
```

---

## 3. ì•„í‚¤í…ì²˜

### ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     TON Connect      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì‚¬ìš©ì     â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  TON Wallet  â”‚
â”‚  (Browser)   â”‚                      â”‚  (Telegram)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTPS
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Cloudflare Pages (Frontend)                 â”‚
â”‚  - React SPA                                        â”‚
â”‚  - TON Connect UI                                   â”‚
â”‚  - i18next                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ API Call
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Cloudflare Workers (Backend API)               â”‚
â”‚  - /api/spin          - ê²Œì„ ë¡œì§                   â”‚
â”‚  - /api/deposit       - ì…ê¸ˆ í™•ì¸                   â”‚
â”‚  - /api/withdraw      - ì¶œê¸ˆ ì²˜ë¦¬                   â”‚
â”‚  - /api/check-balance - ì”ì•¡ ì¡°íšŒ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ TonCenter API
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             TON Blockchain                          â”‚
â”‚  - Jetton Transfers (CSPIN)                        â”‚
â”‚  - Transaction History                              â”‚
â”‚  - On-chain Verification                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ’° ìê¸ˆ íë¦„

```
1. ì…ê¸ˆ (Deposit)
   ì‚¬ìš©ì â†’ CSPIN Transfer â†’ ê²Œì„ ì§€ê°‘
   â†“
   Workers APIê°€ íŠ¸ëœì­ì…˜ ê²€ì¦
   â†“
   í¬ë ˆë”§ ì¦ê°€

2. ê²Œì„ (Spin)
   í¬ë ˆë”§ ì°¨ê° â†’ ë°±ì—”ë“œ ê²Œì„ ë¡œì§ â†’ ê²°ê³¼ ë°˜í™˜
   (Provably Fair ì•Œê³ ë¦¬ì¦˜)

3. ì¶œê¸ˆ (Withdraw)
   ì‚¬ìš©ì ìš”ì²­ â†’ ë°±ì—¤ë“œ ê²€ì¦ â†’ ê²Œì„ ì§€ê°‘ì—ì„œ Transfer
   â†“
   í¬ë ˆë”§ ì°¨ê°
```

---

## 4. í•µì‹¬ ê°œë…

### ğŸ² Provably Fair (ì¦ëª… ê°€ëŠ¥í•œ ê³µì •ì„±)

ê²Œì„ ê²°ê³¼ê°€ ì¡°ì‘ë˜ì§€ ì•Šì•˜ìŒì„ ìˆ˜í•™ì ìœ¼ë¡œ ì¦ëª…í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜

```typescript
// ê²Œì„ ì‹œì‘ ì „: ì„œë²„ê°€ Server Seed ìƒì„± (í•´ì‹œ ê³µê°œ)
serverSeedHash = SHA256(serverSeed)

// ê²Œì„ ì¤‘: í´ë¼ì´ì–¸íŠ¸ê°€ Client Seed ì œê³µ
clientSeed = userInput || random()

// ê²°ê³¼ ê³„ì‚°
result = HMAC_SHA256(serverSeed, clientSeed)

// ê²Œì„ ì¢…ë£Œ í›„: serverSeed ê³µê°œí•˜ì—¬ ê²€ì¦ ê°€ëŠ¥
```

### ğŸª™ CSPIN Jetton

TON ë¸”ë¡ì²´ì¸ì˜ í‘œì¤€ í† í° (TEP-74)

- **Master Contract**: EQAvlW...
- **Decimals**: 9
- **Transfer Opcode**: 0xf8a7ea5
- **ê° ì‚¬ìš©ìë§ˆë‹¤ ê°œë³„ Jetton Wallet ì¡´ì¬**

### ğŸ” ë³´ì•ˆ ì›ì¹™

1. **ì ˆëŒ€ ê·œì¹™**: ê°œì¸í‚¤/ë‹ˆëª¨ë‹‰ì„ ì½”ë“œì— í¬í•¨ ê¸ˆì§€
2. **í™˜ê²½ë³€ìˆ˜**: Cloudflare Workers Secretsë¡œ ê´€ë¦¬
3. **ê²€ì¦**: ëª¨ë“  íŠ¸ëœì­ì…˜ì„ ë¸”ë¡ì²´ì¸ì—ì„œ ì¬ê²€ì¦
4. **Rate Limiting**: API í˜¸ì¶œ ì œí•œ

---

## 5. ë””ë ‰í„°ë¦¬ êµ¬ì¡°

```
CandleSpinner/
â”œâ”€â”€ ğŸ“ src/                      # Frontend ì†ŒìŠ¤
â”‚   â”œâ”€â”€ App.tsx                  # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ main.tsx                 # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ theme.ts                 # Material-UI Theme
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/           # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Deposit.tsx          # ì…ê¸ˆ ëª¨ë‹¬
â”‚   â”‚   â”œâ”€â”€ Withdraw.tsx         # ì¶œê¸ˆ ëª¨ë‹¬
â”‚   â”‚   â””â”€â”€ SlotMachine.tsx      # ê¸°ë³¸ ìŠ¬ë¡¯ë¨¸ì‹  (ë ˆê±°ì‹œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ features/             # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”‚   â””â”€â”€ slot/
â”‚   â”‚       â”œâ”€â”€ components/
â”‚   â”‚       â”‚   â”œâ”€â”€ SlotMachineV2.tsx  # ê³ ê¸‰ ìŠ¬ë¡¯ë¨¸ì‹ 
â”‚   â”‚       â”‚   â”œâ”€â”€ Reel.tsx
â”‚   â”‚       â”‚   â”œâ”€â”€ BettingControl.tsx
â”‚   â”‚       â”‚   â””â”€â”€ DoubleUpModal.tsx
â”‚   â”‚       â”œâ”€â”€ api/
â”‚   â”‚       â””â”€â”€ types/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ hooks/                # Custom Hooks
â”‚   â”‚   â”œâ”€â”€ useLanguage.ts       # ë‹¤êµ­ì–´ Hook
â”‚   â”‚   â””â”€â”€ useTonConnect.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/                # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ logger.ts            # ë¡œê¹…
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ api/                  # API í´ë¼ì´ì–¸íŠ¸
â”‚       â””â”€â”€ client.ts
â”‚
â”œâ”€â”€ ğŸ“ functions/                # Cloudflare Workers
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ spin.ts              # ê²Œì„ API
â”‚       â”œâ”€â”€ deposit.ts           # ì…ê¸ˆ í™•ì¸
â”‚       â”œâ”€â”€ withdraw.ts          # ì¶œê¸ˆ ì²˜ë¦¬
â”‚       â””â”€â”€ check-balance.ts     # ì”ì•¡ ì¡°íšŒ
â”‚
â”œâ”€â”€ ğŸ“ public/                   # ì •ì  íŒŒì¼
â”‚   â””â”€â”€ tonconnect-manifest.json # TON Connect ì„¤ì •
â”‚
â”œâ”€â”€ ğŸ“ docs/                     # ğŸ“š ë¬¸ì„œ ì¤‘ì•™ ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ README.md                # ë¬¸ì„œ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ ğŸ“ ssot/                 # âœ… Single Source of Truth
â”‚   â”œâ”€â”€ ğŸ“ workflows/            # ğŸ¤– AI ì›Œí¬í”Œë¡œìš°
â”‚   â”œâ”€â”€ ğŸ“ instructions/         # ğŸ“‹ ì§€ì‹œì‚¬í•­ ì•„ì¹´ì´ë¸Œ
â”‚   â”œâ”€â”€ ğŸ“ solutions/            # âœ… í•´ê²° ê¸°ë¡
â”‚   â””â”€â”€ ğŸ“ implementation-plans/ # ğŸ“ êµ¬í˜„ ê³„íš
â”‚
â”œâ”€â”€ ğŸ“ archive/                  # ğŸ”’ ì½ê¸° ì „ìš© ì•„ì¹´ì´ë¸Œ
â”‚   â””â”€â”€ mvp-v2-ì™„ì„±ë³¸/           # MVP ì°¸ì¡°ìš© (ìˆ˜ì • ê¸ˆì§€)
â”‚
â”œâ”€â”€ package.json                 # ì˜ì¡´ì„±
â”œâ”€â”€ tsconfig.json                # TypeScript ì„¤ì •
â”œâ”€â”€ vite.config.ts               # Vite ì„¤ì •
â”œâ”€â”€ tailwind.config.js           # Tailwind ì„¤ì •
â””â”€â”€ wrangler.toml                # Cloudflare Workers ì„¤ì •
```

### ğŸ“‚ ì£¼ìš” íŒŒì¼ ì„¤ëª…

| íŒŒì¼ | ìš©ë„ | ì¤‘ìš”ë„ |
|------|------|--------|
| `src/App.tsx` | ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ | â­â­â­ |
| `src/constants.ts` | í™˜ê²½ë³€ìˆ˜ (ì§€ê°‘ ì£¼ì†Œ ë“±) | â­â­â­ |
| `wrangler.toml` | Workers ë°°í¬ ì„¤ì • | â­â­â­ |
| `docs/workflows/í€µ-AIì›Œí¬í”Œë¡œì›Œ-ì§€ì¹¨ì„œ.md` | AI ê°œë°œ ê°€ì´ë“œ | â­â­â­ |
| `archive/mvp-v2-ì™„ì„±ë³¸/` | ì°¸ì¡°ìš© ì™„ì„±ë³¸ | â­â­ |

---

## 6. í•„ìˆ˜ ë¬¸ì„œ

### ğŸ“– ì½ì–´ì•¼ í•  ìˆœì„œ

#### 1ë‹¨ê³„: í”„ë¡œì íŠ¸ ì´í•´ (30ë¶„)
```
1. README.md (ë£¨íŠ¸)
   â†“
2. docs/README.md
   â†“
3. docs/IMPLEMENTATION_SUMMARY.md (i18n êµ¬í˜„)
```

#### 2ë‹¨ê³„: ì•„í‚¤í…ì²˜ íŒŒì•… (1ì‹œê°„)
```
1. docs/ssot/README.md (ìˆë‹¤ë©´)
   â†“
2. docs/instructions/MVP-v2-ì•„í‚¤í…ì²˜-ì„¤ê³„_20251101.md
   â†“
3. archive/mvp-v2-ì™„ì„±ë³¸/README.md
```

#### 3ë‹¨ê³„: ê°œë°œ ì›Œí¬í”Œë¡œìš° (30ë¶„)
```
1. docs/workflows/í€µ-AIì›Œí¬í”Œë¡œì›Œ-ì§€ì¹¨ì„œ.md  â­ ì¤‘ìš”!
   â†“
2. docs/workflows/[ë³´ì•ˆ-ì •ì±…]_ë³´ì•ˆ-ì›Œí¬í”Œë¡œìš°-ê°•ì œ.md
```

#### 4ë‹¨ê³„: ì‹¤ì „ ê°€ì´ë“œ (í•„ìš”ì‹œ)
```
- docs/guides/TONCENTER_API_KEY_í™•ì¸ë°©ë²•.md
- docs/deployment/ë³´ì•ˆê°•í™”_ë°°í¬ê°€ì´ë“œ_20251102.md
- docs/solutions/TROUBLESHOOTING.md
```

---

## 7. ê°œë°œ í™˜ê²½ ì„¤ì •

### ğŸš€ ë¹ ë¥¸ ì‹œì‘

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/aiandyou50/CandleSpinner.git
cd CandleSpinner

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì • (ì ˆëŒ€ ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ!)
# .env.local íŒŒì¼ ìƒì„±
VITE_TONCENTER_RPC_URL=https://toncenter.com/api/v2/jsonRPC

# 4. ê°œë°œ ì„œë²„ ì‹œì‘
npm run dev
# â†’ http://localhost:5173

# 5. ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build

# 6. Cloudflare Workers ë¡œì»¬ í…ŒìŠ¤íŠ¸
npm run wrangler:dev
```

### ğŸ”‘ í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜

#### Frontend (.env.local)
```bash
VITE_TONCENTER_RPC_URL=https://toncenter.com/api/v2/jsonRPC
```

#### Cloudflare Workers (Secrets)
```bash
# wrangler secret put ëª…ë ¹ìœ¼ë¡œ ì„¤ì •
TONCENTER_API_KEY=your-api-key-here
GAME_WALLET_PRIVATE_KEY=your-private-key-here
```

âš ï¸ **ì£¼ì˜**: ì ˆëŒ€ `.env` íŒŒì¼ì„ ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš”!

---

## 8. ì£¼ìš” ì›Œí¬í”Œë¡œìš°

### ğŸ”„ ê°œë°œ ì›Œí¬í”Œë¡œìš°

```
1. ì´ìŠˆ í™•ì¸ / ê¸°ëŠ¥ ìš”ì²­ ì ‘ìˆ˜
   â†“
2. docs/instructions/ ì— ì§€ì‹œì‚¬í•­ ë¬¸ì„œ ìƒì„±
   â†“
3. ì½”ë“œ ì‘ì„± (src/ ë˜ëŠ” functions/)
   â†“
4. ë¡œì»¬ í…ŒìŠ¤íŠ¸ (npm run dev)
   â†“
5. ë¹Œë“œ í™•ì¸ (npm run build)
   â†“
6. docs/solutions/ ì— í•´ê²° ê¸°ë¡ ì‘ì„±
   â†“
7. Git ì»¤ë°‹ & í‘¸ì‹œ
   â†“
8. Cloudflare Pages ìë™ ë°°í¬
```

### ğŸ“ ë¬¸ì„œí™” ì›Œí¬í”Œë¡œìš°

```
ì‘ì—… ì‹œì‘
   â†“
[instructions] ì§€ì‹œì‚¬í•­ ê¸°ë¡
   â†“
ì½”ë“œ ë³€ê²½
   â†“
ê´€ë ¨ docs ì—…ë°ì´íŠ¸ (SSoT, ê°€ì´ë“œ ë“±)
   â†“
[solutions] í•´ê²° ê¸°ë¡ ì‘ì„±
   â†“
ì»¤ë°‹ (ì½”ë“œ + ë¬¸ì„œ í•¨ê»˜)
```

**ì›ì¹™**: "No Sync, No Commit" (ì½”ë“œì™€ ë¬¸ì„œ ë™ê¸°í™” í•„ìˆ˜)

### ğŸš¨ ê¸´ê¸‰ ìˆ˜ì • ì›Œí¬í”Œë¡œìš°

```
1. ë²„ê·¸ ë°œê²¬
   â†“
2. [ê¸´ê¸‰ìˆ˜ì •] ë¬¸ì„œ ì‘ì„± (docs/solutions/)
   â†“
3. í•«í”½ìŠ¤ ì»¤ë°‹
   â†“
4. ì¦‰ì‹œ ë°°í¬
   â†“
5. ì‚¬í›„ ë¬¸ì„œí™” (ì›ì¸ ë¶„ì„, ì˜ˆë°©ì±…)
```

---

## ğŸ¯ í•µì‹¬ API ì—”ë“œí¬ì¸íŠ¸

### Frontend â†’ Backend

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ìš©ë„ | íŒŒì¼ |
|-----------|--------|------|------|
| `/api/spin` | POST | ê²Œì„ ì‹¤í–‰ | `functions/api/spin.ts` |
| `/api/deposit` | POST | ì…ê¸ˆ í™•ì¸ | `functions/api/deposit.ts` |
| `/api/withdraw` | POST | ì¶œê¸ˆ ìš”ì²­ | `functions/api/withdraw.ts` |
| `/api/check-balance` | POST | ì”ì•¡ ì¡°íšŒ | `functions/api/check-balance.ts` |
| `/api/double-up` | POST | ë”ë¸”ì—… ê²Œì„ | `functions/api/double-up.ts` |

### Backend â†’ TON Blockchain

```typescript
// TonCenter API
https://toncenter.com/api/v2/jsonRPC
https://toncenter.com/api/v3/jetton/wallets

// ì£¼ìš” ë©”ì„œë“œ
- getJettonWalletAddress()
- getAccountState()
- getTransactions()
- sendBoc()
```

---

## ğŸ” ì½”ë“œ ì˜ˆì‹œ

### ìŠ¬ë¡¯ë¨¸ì‹  ìŠ¤í•€ í˜¸ì¶œ

```typescript
// Frontend (src/features/slot/components/SlotMachineV2.tsx)
import { spinSlot } from '../api/slot';

const handleSpin = async () => {
  const result = await spinSlot({
    walletAddress: '0:abc...',
    betAmount: 10,
    clientSeed: 'user-random-123',
  });

  // result: {
  //   reelResults: [['ğŸ’', 'ğŸ‹', 'ğŸŠ'], ...],
  //   winAmount: 50,
  //   serverSeed: 'revealed-after-game',
  //   serverSeedHash: 'hash-before-game',
  // }
};
```

### ì…ê¸ˆ í”„ë¡œì„¸ìŠ¤

```typescript
// 1. Jetton Transfer í˜ì´ë¡œë“œ ìƒì„±
const payload = buildJettonTransferPayload(
  amount,          // ê¸ˆì•¡ (nano ë‹¨ìœ„)
  gameWallet,      // ê²Œì„ ì§€ê°‘ ì£¼ì†Œ
  responseAddress  // ì‚¬ìš©ì ì§€ê°‘ (ì‰ì—¬ TON ë°˜í™˜ìš©)
);

// 2. TON Connectë¡œ íŠ¸ëœì­ì…˜ ì „ì†¡
const result = await tonConnectUI.sendTransaction({
  validUntil: Math.floor(Date.now() / 1000) + 300,
  messages: [{
    address: userJettonWallet,
    amount: toNano('0.2').toString(),
    payload: payload,
  }],
});

// 3. ë°±ì—”ë“œë¡œ í™•ì¸ ìš”ì²­
await verifyDeposit({
  walletAddress,
  txHash: result.boc,
});
```

---

## ğŸ› ë””ë²„ê¹… íŒ

### ë¡œê·¸ í™•ì¸

```typescript
// Frontend
import { logger } from '@/utils/logger';
logger.info('íŠ¸ëœì­ì…˜ ì‹œì‘', { amount: 10 });
logger.error('ì˜¤ë¥˜ ë°œìƒ', error);

// Workers
console.log('[API]', 'Request received');
```

### ë¸Œë¼ìš°ì € ì½˜ì†”
```javascript
// ë””ë²„ê·¸ ë¡œê·¸ ëª¨ë‹¬ ì—´ê¸° (Deposit.tsx)
<DebugLogModal isOpen={showDebugLog} onClose={...} />
```

### Cloudflare Workers ë¡œê·¸
```bash
# ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸°
npx wrangler tail

# íŠ¹ì • í•¨ìˆ˜ ë¡œê·¸
npx wrangler tail --format pretty
```

---

## ğŸ“š í•™ìŠµ ìë£Œ

### TON ë¸”ë¡ì²´ì¸
- [TON Docs](https://docs.ton.org/)
- [TON Connect](https://docs.ton.org/develop/dapps/ton-connect/overview)
- [Jetton (TEP-74)](https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md)

### Cloudflare
- [Workers Docs](https://developers.cloudflare.com/workers/)
- [Pages Deployment](https://developers.cloudflare.com/pages/)

### React + TypeScript
- [React Docs](https://react.dev/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)

### Material-UI
- [MUI Docs](https://mui.com/material-ui/getting-started/)
- [MUI Templates](https://mui.com/material-ui/getting-started/templates/)

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì‹ ê·œ ê°œë°œì)

- [ ] README.md ì½ìŒ
- [ ] docs/workflows/í€µ-AIì›Œí¬í”Œë¡œì›Œ-ì§€ì¹¨ì„œ.md ìˆ™ì§€
- [ ] ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì • ì™„ë£Œ
- [ ] npm run dev ì‹¤í–‰ ì„±ê³µ
- [ ] TON Connect ì§€ê°‘ ì—°ê²° í…ŒìŠ¤íŠ¸
- [ ] ì…ê¸ˆ/ì¶œê¸ˆ í”Œë¡œìš° ì´í•´
- [ ] Provably Fair ê°œë… ì´í•´
- [ ] Git ì›Œí¬í”Œë¡œìš° ìˆ™ì§€
- [ ] ë³´ì•ˆ ê·œì¹™ ìˆ™ì§€ (ê°œì¸í‚¤ ê´€ë¦¬)

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### ì½”ë“œ ìŠ¤íƒ€ì¼
- TypeScript Strict Mode ì¤€ìˆ˜
- ESLint ê·œì¹™ ì¤€ìˆ˜
- ì»´í¬ë„ŒíŠ¸ëŠ” í•¨ìˆ˜í˜•ìœ¼ë¡œ ì‘ì„±
- Hooks ê·œì¹™ ì¤€ìˆ˜

### ì»¤ë°‹ ë©”ì‹œì§€
```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ë³€ê²½
refactor: ì½”ë“œ ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
chore: ë¹Œë“œ/ì„¤ì • ë³€ê²½
```

### Pull Request
1. ê¸°ëŠ¥ ë¸Œëœì¹˜ ìƒì„± (`feature/xxx`)
2. ì½”ë“œ ì‘ì„± + ë¬¸ì„œ ì—…ë°ì´íŠ¸
3. ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
4. PR ìƒì„± (ì„¤ëª… í¬í•¨)
5. ë¦¬ë·° í›„ ë³‘í•©

---

## ğŸ“ ì§€ì›

- **GitHub Issues**: [CandleSpinner Issues](https://github.com/aiandyou50/CandleSpinner/issues)
- **ë¬¸ì„œ**: `docs/` í´ë” ì°¸ì¡°
- **ì•„ì¹´ì´ë¸Œ**: `archive/mvp-v2-ì™„ì„±ë³¸/` (ì°¸ì¡°ìš©)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-10  
**ë²„ì „**: 2.0.0  
**ìƒíƒœ**: âœ… í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ
