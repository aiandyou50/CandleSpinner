# [AI-워크플로우-지침서.md] (v4.1)

**버전:** 4.1
**상태:** 활성
**최종 업데이트:** 2025년 10월 25일
**변경 사항(v4.0 대비):**
* AI의 파일 생성/수정/이동 기능 인정 및 워크플로우 반영 (Step 3 수정)
* `kanban.md`의 `[Done]` 섹션 관리 규칙 변경 (Step 4 수정)

### **1. 문서 목적**

이 문서는 CandleSpinner 프로젝트 AI 코딩 에이전트(이하 "AI")의 **행동 원칙**입니다. 목표는 코드와 문서(SSOT)를 항상 동기화하고, AI 교체 시에도 작업을 원활히 인계하는 것입니다.

**핵심 원칙:**
* **SSOT 우선:** 모든 작업은 관련 SSOT 문서 확인 후 시작합니다.
* **동기화 필수:** 코드 수정 시 관련 SSOT 문서 수정안을 함께 제안합니다.
* **사용자 승인:** AI는 파일 생성/이동/수정 작업을 **실행하기 전** 사용자 승인을 받고, **실행 후** 결과를 사용자에게 확인받습니다.

---

### **2. 핵심 참조 문서**

AI는 작업 시 다음 문서를 최우선으로 참조합니다.

1.  **`docs/ssot/` 폴더:** 프로젝트 정의, 아키텍처, 핵심 로직 등 SSoT 문서들.
2.  **`kanban.md`:** 현재 작업 현황판.
3.  **`CHANGELOG.md`:** 프로젝트 버전 및 변경 이력.
4.  **`docs/workflows/[보안-정책]...md`:** 보안 관련 필수 지침.

---

### **3. 표준 워크플로우 (4단계)**

AI는 사용자의 모든 요청에 대해 다음 4단계를 순서대로 따릅니다.

**[Step 1] 요청 분석 및 SSOT 확인**
1.  사용자의 요청(예: 기능 추가, 버그 수정)을 분석합니다.
2.  **`docs/ssot/` 폴더에서 관련 문서를 찾아 내용을 확인합니다.**
3.  사용자에게 확인 결과와 작업 시작 여부를 묻습니다.
    * **(SSOT 일치 시):** "요청을 확인했습니다. `docs/ssot/[문서명]`을 기준으로 작업을 시작하겠습니다."
    * **(SSOT 충돌/누락 시):** "요청하신 내용이 SSOT와 다르거나 누락되었습니다. **SSOT 문서를 먼저 업데이트**해야 합니다. 관련 문서 수정안을 제안할까요?"

**[Step 2] 실행 계획 및 수정안 제안**
1.  사용자의 승인 후, AI는 요청된 작업을 수행하기 위한 **구체적인 실행 계획**을 세웁니다. 이 계획에는 다음이 포함되어야 합니다.
    * 수정/생성할 코드 파일 목록 및 변경 내용 요약
    * 동기화해야 할 SSOT 문서 목록 및 수정 내용 요약
    * 필요한 신규 파일 생성 또는 기존 파일 이동 계획
2.  AI는 사용자에게 이 **실행 계획과 함께 코드 및 SSOT 문서 수정안을 제안**하고 **실행 승인**을 요청합니다.
    * **(제안 예시):**
        ```
        [실행 계획 제안]
        요청하신 '신규 기능 X' 구현을 위해 다음 작업을 수행하겠습니다.
        1. `src/components/NewFeature.tsx` 파일 신규 생성
        2. `src/App.tsx` 파일 수정 (NewFeature 컴포넌트 임포트)
        3. `docs/ssot/[산출물1].md` 파일 수정 (기능 명세 추가)
        4. `docs/ssot/[산출물3]MVP.md` 파일 수정 (관련 로직 의사코드 추가)

        [코드 및 SSOT 수정안]
        - `NewFeature.tsx` 생성 코드: [... 코드 ...]
        - `App.tsx` 수정 코드: [... 코드 ...]
        - `[산출물1].md` 수정 내용: [... 내용 ...]
        - `[산출물3]MVP.md` 수정 내용: [... 내용 ...]

        위 계획대로 파일 생성 및 수정을 진행할까요?
        ```

**[Step 3] AI 실행 및 사용자 확인**
1.  사용자가 실행 계획과 수정안을 **승인**하면, AI는 계획된 **모든 파일 생성, 수정, 이동 작업을 직접 수행**합니다.
2.  작업 수행 중 오류가 발생하면 즉시 사용자에게 보고하고 지침을 구합니다.
3.  모든 파일 작업이 성공적으로 완료되면, AI는 **수행 결과(변경된 파일 목록 등)를 사용자에게 보고**하고 **최종 확인**을 요청합니다.
    * **(결과 보고 및 확인 요청 예시):** "계획대로 파일 생성 및 수정 작업을 완료했습니다. (`NewFeature.tsx` 생성, `App.tsx` 수정, `[산출물1].md` 수정, `[산출물3]MVP.md` 수정) 변경 사항을 검토 후 최종 확인해주십시오."
4.  **(버전 업데이트):** 사용자가 최종 확인하면, AI는 SemVer 기준 버전 변경 필요 여부를 묻고, 필요시 `CHANGELOG.md`와 `package.json` **수정 계획을 제안하고 사용자 승인 후 직접 수정**합니다.

**[Step 4] 작업 완료 및 칸반 업데이트**
1.  사용자가 모든 변경 사항을 최종 확인하고, (필요시) 버전 업데이트까지 완료되면 AI는 작업을 최종 완료합니다.
2.  AI는 해당 작업을 위한 **Git 커밋 메시지를 제안**합니다.
3.  AI는 `kanban.md` 파일을 열어 다음 규칙에 따라 업데이트합니다.
    * **`[Done]` 섹션:** **기존 내용을 모두 삭제**하고, 방금 완료한 **단 하나의 작업 항목**만 `- [x]` 마크와 함께 추가합니다.
    * **`[In Progress]` 섹션:** 현재 항목을 `[Done]`으로 옮겼으므로 이 섹션은 비워집니다.
4.  **(최종 응답):** "`kanban.md`를 업데이트했습니다. 추천 커밋 메시지: '[메시지 내용]'. 다음 작업을 지시해 주세요."

---

### **4. 세션 시작 규칙**

1.  사용자는 새 세션 시작 시 AI에게 **`docs/workflows/퀵-AI워크플로워-지침서-v4.1.md`** 내용을 제공합니다.
2.  AI는 요약 지침서를 읽고, **가장 먼저 `kanban.md` 파일을 확인**합니다.
3.  AI의 첫 응답은 항상 다음과 같습니다.
    * **(시작 예시):** "퀵-워크플로우 지침서(v4.1)를 로드했습니다. `kanban.md` 확인 결과, 직전에 완료된 작업은 '[Done 항목 내용]'입니다. 현재 `[In Progress]` 작업은 없습니다. `[To Do]` 목록에서 다음 작업을 제안할까요, 아니면 지시를 기다릴까요?"