# [AI-워크플로우-지침서.md] (v4.2)

**버전:** 4.2
**상태:** 초안
**최종 업데이트:** 2025년 10월 25일
**변경 사항(v4.1 대비):**
* **섹션 2 수정:** 문서 저장소 구조 설명 보강 (각 폴더의 목적 명확화)
* **Step 2 수정:** SSOT 문서 수정이 불필요할 경우 명시하는 규칙 추가
* **Step 4 수정:** 칸반 `[Done]` 섹션 관리 규칙 명시적 추가

### **1. 문서 목적**

이 문서는 CandleSpinner 프로젝트 AI 코딩 에이전트(이하 "AI")의 **행동 원칙**입니다. 목표는 코드와 문서(SSOT)를 항상 동기화하고, AI 교체 시에도 작업을 원활히 인계하는 것입니다.

**핵심 원칙:**
* **SSOT 우선:** 모든 작업은 관련 SSOT 문서 확인 후 시작합니다.
* **동기화 필수:** 코드 수정 시 관련 SSOT 문서 수정안을 함께 제안합니다. (단, 수정 불필요 시 명시)
* **사용자 승인:** AI는 파일 생성/이동/수정 작업을 **실행하기 전** 사용자 승인을 받고, **실행 후** 결과를 사용자에게 확인받습니다.

---

### **2. 문서 저장소 구조 및 활용**

AI는 다음 구조를 이해하고 각 폴더/파일의 목적에 맞게 문서를 참조 및 관리해야 합니다.

1.  **`docs/ssot/` (단일 진실 공급원)**
    * **내용:** 프로젝트 정의(`[산출물1]`), 기술 스택(`[산출물2]`), 핵심 로직(`[산출물3]MVP`), TMA 통합(`[산출물4]`) 등 **프로젝트의 최종 설계 및 요구사항** 문서. 메인 `README.md` 와 `INDEX.md` 는 전체 구조를 안내합니다.
    * **활용:** 모든 코드 생성/수정 작업의 **기준**이 됩니다. [Step 1]에서 항상 먼저 확인해야 합니다. [Step 2]에서 코드 변경 시 **반드시 동기화**되어야 합니다 (수정 불필요 시 제외).

2.  **`kanban.md` (칸반 보드 - 루트)**
    * **내용:** `[To Do]`, `[In Progress]`, `[Done]` 섹션으로 **현재 작업 상태**를 관리합니다.
    * **활용:** AI는 **세션 시작 시** 이 파일을 읽어 현재 상태를 파악하고, **작업 완료 시([Step 4])** `[Done]` 섹션을 업데이트합니다.

3.  **`CHANGELOG.md` (변경 이력 - 루트)**
    * **내용:** SemVer 기준 **프로젝트 버전**과 각 버전별 주요 변경 사항(`Added`, `Fixed`, `Docs` 등)을 기록합니다.
    * **활용:** AI는 **[Step 3]**에서 버전 업데이트 필요시 이 파일을 수정합니다.

4.  **`docs/workflows/` (워크플로우 지침)**
    * **내용:** `AI-워크플로우-지침서.md`(본 문서)와 `퀵-AI워크플로워-지침서.md`(요약본), 그리고 `[보안-정책]...md`_보안-워크플로우-강제.md] 등 AI의 행동 규칙 문서.
    * **활용:** AI는 항상 이 폴더의 지침을 따라야 합니다. `퀵` 가이드는 세션 시작 시 사용됩니다.

5.  **`docs/instructions/` (명령 기록)**
    * **내용:** 사용자가 AI에게 내린 주요 작업 지시 내용(`[지시서명칭]_[타임스탬프].md`).
    * **활용:** AI는 **[Step 2]** 시작 시 사용자 지시 내용을 이 폴더에 자동으로 저장합니다. (향후 감사 및 컨텍스트 복구용)

6.  **`docs/solutions/` (해결 기록)**
    * **내용:** AI가 작업을 완료한 후 작성하는 상세 보고서(`[지시서명칭]_[타임스탬프]_solution.md`). 해결 과정, 코드 변경 요약, 참고 사항, 후임 AI 인수인계 내용 포함.
    * **활용:** AI는 **[Step 4]** 완료 전 이 폴더에 해결 기록을 작성합니다. (지식 축적 및 인수인계용)

7.  **`docs/reports/` (임시/보고성 문서)**
    * **내용:** 분석 보고서, 테스트 결과 등 SSoT가 아닌 일회성 또는 정보성 문서. 명명 규칙: `[보고서]_[YYYYMMDD]_[주제].md`.
    * **활용:** AI는 특정 분석이나 보고서 작성 요청 시 이 폴더에 결과를 저장합니다.

8.  **`PoC/` (읽기 전용 아카이브)**
    * **내용:** 완료된 PoC 단계의 코드 및 문서 기록.
    * **활용:** **절대 수정 금지.** 학습 및 참고용으로만 사용합니다.

9.  **`docs/레거시/` (과거 버전 아카이브)**
    * **내용:** 이전 버전의 워크플로우 문서, 칸반 등 폐기된 문서 보관.
    * **활용:** 현재 작업에는 참조하지 않습니다.

---

### **3. 핵심 참조 문서 (재정의)**

AI는 작업 시 다음 **4가지** 문서를 최우선으로 참조합니다.

1.  **`docs/ssot/` 폴더:** 기술적 진실의 원천.
2.  **`kanban.md`:** 현재 작업 상태 확인.
3.  **`CHANGELOG.md`:** 버전 확인 및 업데이트 대상.
4.  **`docs/workflows/AI-워크플로우-지침서-v4.2.md` (본 문서):** 행동 규칙.

---

### **4. 표준 워크플로우 (4단계) - v4.2 수정**

AI는 사용자의 모든 요청에 대해 다음 4단계를 순서대로 따릅니다.

**[Step 1] 요청 분석 및 SSOT 확인**
1.  사용자의 요청을 분석합니다.
2.  **`docs/ssot/` 폴더에서 관련 문서를 찾아 내용을 확인합니다.**
3.  사용자에게 확인 결과와 작업 시작 여부를 묻습니다.
    * **(SSOT 일치 시):** "요청을 확인했습니다. `docs/ssot/[문서명]`을 기준으로 작업을 시작하겠습니다."
    * **(SSOT 충돌/누락 시):** "요청하신 내용이 SSOT와 다르거나 누락되었습니다. **SSOT 문서를 먼저 업데이트**해야 합니다. 관련 문서 수정안을 제안할까요?"

**[Step 2] 실행 계획 및 수정안 제안 (v4.2 수정: 효율성 명시)**
1.  사용자의 승인 후, AI는 요청된 작업을 수행하기 위한 **구체적인 실행 계획**을 세웁니다.
2.  **AI는 이 작업이 SSOT 문서(`docs/ssot/`) 수정도 필요한지 판단합니다.**
3.  AI는 사용자에게 **실행 계획, 코드 수정안, 그리고 (필요한 경우) SSOT 문서 수정안을 함께 제안**하고 **실행 승인**을 요청합니다.
    * **(제안 예시 - SSOT 수정 필요 시):** (이전 v4.1 예시와 동일)
        ```
        [실행 계획 제안]
        ... (코드 파일 수정 + SSOT 파일 수정 계획 포함) ...
        [코드 및 SSOT 수정안]
        ... (코드 수정안 + SSOT 수정안 포함) ...
        위 계획대로 파일 생성 및 수정을 진행할까요?
        ```
    * **(제안 예시 - SSOT 수정 불필요 시):**
        ```
        [실행 계획 제안]
        요청하신 '로그 메시지 문구 변경' 작업을 위해 다음 작업을 수행하겠습니다.
        1. `src/utils/logger.ts` 파일 수정 (로그 문구 변경)
        2. (이 작업은 기능 변경이 아니므로 SSOT 문서 수정은 필요하지 않습니다.)

        [코드 수정안]
        - `logger.ts` 수정 코드: [... 코드 ...]

        위 계획대로 파일 수정을 진행할까요?
        ```

**[Step 3] AI 실행 및 사용자 확인**
1.  사용자가 실행 계획과 수정안을 **승인**하면, AI는 계획된 **모든 파일 생성, 수정, 이동 작업을 직접 수행**합니다. (이때 `docs/instructions/`에 명령 기록 자동 생성)
2.  작업 수행 중 오류가 발생하면 즉시 사용자에게 보고하고 지침을 구합니다.
3.  모든 파일 작업이 성공적으로 완료되면, AI는 **수행 결과(변경된 파일 목록 등)를 사용자에게 보고**하고 **최종 확인**을 요청합니다.
4.  **(버전 업데이트):** 사용자가 최종 확인하면, AI는 SemVer 기준 버전 변경 필요 여부를 묻고, 필요시 `CHANGELOG.md`와 `package.json` **수정 계획을 제안하고 사용자 승인 후 직접 수정**합니다.

**[Step 4] 작업 완료 및 칸반 업데이트 (v4.2 수정: 칸반 규칙 명시)**
1.  사용자가 모든 변경 사항을 최종 확인하고, (필요시) 버전 업데이트까지 완료되면 AI는 작업을 최종 완료합니다.
2.  AI는 해당 작업을 위한 **Git 커밋 메시지를 제안**합니다.
3.  **(해결 기록 작성):** AI는 `docs/solutions/` 폴더에 해당 작업의 해결 기록 문서를 작성합니다.
4.  **(칸반 업데이트):** AI는 `kanban.md` 파일을 열어 다음 규칙에 따라 업데이트합니다.
    * **`[Done]` 섹션:** **이 섹션의 기존 내용을 모두 삭제**하고, **방금 완료한 *단 하나의* 작업 항목**만 `- [x]` 마크와 함께 추가합니다.
    * **`[In Progress]` 섹션:** 현재 항목을 `[Done]`으로 옮겼으므로 이 섹션은 비워집니다.
5.  **(최종 응답):** "`docs/solutions/`에 해결 기록을 저장하고 `kanban.md`를 업데이트했습니다. 추천 커밋 메시지: '[메시지 내용]'. 다음 작업을 지시해 주세요."

---

### **5. 세션 시작 규칙**

1.  사용자는 새 세션 시작 시 AI에게 **`docs/workflows/퀵-AI워크플로워-지침서-v4.2.md`** 내용을 제공합니다.
2.  AI는 요약 지침서를 읽고, **가장 먼저 `kanban.md` 파일을 확인**합니다.
3.  AI의 첫 응답은 항상 다음과 같습니다.
    * **(시작 예시):** "퀵-워크플로우 지침서(v4.2)를 로드했습니다. `kanban.md` 확인 결과, 직전에 완료된 작업은 '[Done 항목 내용]'입니다. 현재 `[In Progress]` 작업은 없습니다. `[To Do]` 목록에서 다음 작업을 제안할까요, 아니면 지시를 기다릴까요?"