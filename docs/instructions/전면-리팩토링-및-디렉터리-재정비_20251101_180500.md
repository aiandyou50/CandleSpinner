# [지시서] 전면 리팩토링 및 디렉터리 재정비

**작성일**: 2025년 11월 1일  
**카테고리**: 리팩토링, 구조 정리, 문서 관리  
**우선순위**: 높음

---

## 사용자 요청 (원문)

> 1. 코드 전체 리팩토링(UI,프론트엔드, 백엔드 포함)
> 2. 디렉토리 전체 깔끔하게 정리
> 3. 사용하지 않는 문서 docs\\legacy_docs로 알맞은 하위 폴더에 이동
> 4. 프론트엔드 UI에서 오류를 확인할 수 있는 상세 디버그 로그 기능이 있어야 됨.
> 5. 사용하지 않는 코드 또한 아카이브 폴더를 만들어서 이동, 폴더명은 알아서 작명
> 6. 현재 RPC 방식 인출 오류 로그
>    - [오후 6:01:13] 인출 시작: 1000 CSPIN (rpc 모드)
>    - [오후 6:01:13] Jetton 주소: UQCsBJHqi3TtqOFiEP2c...
>    - [오후 6:01:13] 📤 요청 페이로드: {"walletAddress":"0:ac0491ea8b74eda8e16210fd9c68f10642f327a70cf8b33e84efad148ce4..."
>    - [오후 6:01:16] API 응답 상태: 500
>    - [오후 6:01:16] ❌ 오류: seqno 획득 실패 (3회 재시도)

---

## 요구사항 요약

1. **전 범위 리팩토링**: 프론트엔드/백엔드/인프라 전역에 걸친 구조 개선 및 품질 향상.
2. **디렉터리 재구성**: 프로젝트 루트 전반의 폴더 구조를 재설계하여 명확한 책임 경계를 마련.
3. **문서 아카이빙**: 사용하지 않는 문서를 `docs/legacy_docs/` 하위로 이동하고 신규 구조에 맞는 인덱스 정리.
4. **UI 디버그 로그 강화**: 사용자 UI에서 오류 상황을 즉시 파악할 수 있는 상세 디버그 로그/알림 체계 도입.
5. **사용하지 않는 코드 아카이빙**: 미사용 코드 자산을 별도 아카이브 폴더로 이동해 유지보수성을 확보.
6. **RPC Seqno 오류 해결**: TonCenter 기반 RPC 인출에서 seqno 재시도 실패 원인을 분석하고 해결책 반영.

---

## 초기 실행 계획 (승인됨)

1. **사전 정리**: SSOT를 기준으로 현재 구조와 책임 영역을 재정리하고, 미사용 자산 후보 목록 및 seqno 오류 조사 로그 계획을 수립한다.
2. **디렉터리 구조 재설계**: 목표 구조도와 이동/삭제/아카이브 목록을 표로 작성해 사용자 확인을 받는다.
3. **코드 리팩토링**: 프론트엔드, 백엔드, 공용 유틸에 대한 모듈화·로깅·오류 처리 개선을 단계적으로 수행한다.
4. **문서/칸반 동기화**: SSOT 및 README 갱신, 칸반 진행 상황 업데이트, instructions/solutions 기록을 유지한다.
5. **검증 및 배포 준비**: 테스트 전략과 환경변수 검증 절차를 마련하고 CHANGELOG 필요 여부를 평가한다.
