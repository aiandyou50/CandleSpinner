# 📋 명령 지시서: 개인키 오류 + 3릴 변경 + SSoT 동기화

**발행일:** 2025-10-23  
**요청자:** 사용자  
**우선순위:** 🔴 CRITICAL (개인키 오류) + HIGH (3릴 변경) + HIGH (SSoT 동기화)  
**워크플로우:** FULL (문서 동기화 필수)

---

## 1. 배경 (Context)

### 개인키 문제
- **테스트 결과:** `/api/debug-private-key` 호출 결과
  - 환경변수 개인키 형식: ✅ HEX (128자)
  - 생성된 지갑: ❌ EQCdUA1OC3KbqGyEB9DLfcvjF9LaHtOBCqyoAAzxmzIVuMyR
  - 환경변수 지갑: UQBFPDdSlPgqPrn2XwhpVq0KQExN2kv83_batQ-dptaR8Mtd
  - **결론:** 개인키와 지갑 주소가 완전히 다른 쌍 = 인출 실패 원인

### 릴 문제
- **현재:** 1개 릴만 화면에 보임
- **정의서:** 3-Reel 슬롯머신 명시
- **사용자 지시:** 3개 릴로 변경

### 토큰 수수료 문제
- **현재:** 게임 지갑이 TON 수수료 지불 (0.03 TON)
- **요청:** 사용자가 수령 시 TON Fee 지불하도록 변경
- **문제:** SSoT 문서에는 명시 안 됨

### SSoT 동기화 문제
- `[산출물1]` (프로젝트 정의서): 3개 릴 명시
- `[산출물2]` (아키텍처): 입금/인출 플로우 설명
- `[산출물3]` (의사코드): API 엔드포인트 로직
- `[산출물4]` (TMA): TMA 하이브리드
- **현황:** 실제 코드와 SSoT 내용 불일치

---

## 2. 요청 사항 (Requirements)

### 2.1 개인키 오류 (CRITICAL)
- [ ] 개인키 오류 원인 분석
- [ ] 개인키 재설정 또는 새로운 게임 지갑 생성 가이드
- [ ] debug API로 검증

### 2.2 토큰 수수료 정책 (HIGH)
- [ ] 상금 수령 시 사용자가 TON Fee 지불하도록 변경
- [ ] `src/components/GameComplete.tsx` 수정
- [ ] API 엔드포인트 로직 확인
- [ ] SSoT 문서에 정책 명시

### 2.3 3개 릴 변경 (HIGH)
- [ ] `src/components/GameComplete.tsx` UI에서 3개 릴 렌더링
- [ ] 스핀 애니메이션 3개 릴 적용
- [ ] SSoT 문서 확인 및 동기화

### 2.4 SSoT 동기화 (HIGH)
- [ ] `[산출물1]` 프로젝트 정의서: 현재 코드 상태 반영
- [ ] `[산출물2]` 아키텍처: 토큰 수수료 정책 추가
- [ ] `[산출물3]` 의사코드: 현재 API 구현 반영
- [ ] `[산출물4]` TMA: 현재 TMA 구현 상태 반영
- [ ] `README.md` (SSoT): 마스터 문서 업데이트

---

## 3. 승인 사항

- [x] FULL 워크플로우 진행 동의
- [x] SSoT 문서 대규모 수정 동의
- [x] [Step 1-6] 모두 진행 동의

---

## 4. 다음 단계

→ [Step 3] 코드 생성 및 문서 동시 수정 (Code-Doc-Sync)

