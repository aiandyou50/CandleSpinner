# Cloudflare Workers 설정 (프론트엔드 + 백엔드 통합)
name = "candlespinner-workers"
compatibility_date = "2024-11-01"
main = "src/index.ts"
compatibility_flags = ["nodejs_compat"]

# Assets (React 빌드 결과물) - Workers Assets 기능
[assets]
directory = "./dist"
binding = "ASSETS"

# KV Namespace (크레딧 저장소)
[[kv_namespaces]]
binding = "CREDIT_KV"
id = "0190e4e479144180a5e0ee7bd47b959b"

# ✅ 환경 변수 (Secrets) - Cloudflare Dashboard에서 설정
# Dashboard → Workers & Pages → candlespinner-workers → Settings → Variables
# 
# 필수 Secrets (Dashboard 또는 npx wrangler secret put <NAME>으로 설정):
# - GAME_WALLET_MNEMONIC: 게임 운영 지갑 니모닉 (24단어)
# - GAME_WALLET_ADDRESS: 게임 운영 지갑 주소
# - CSPIN_JETTON_MASTER: CSPIN Jetton Master 주소
# - CSPIN_JETTON_WALLET: 게임의 Jetton Wallet 주소
# - TONCENTER_API_KEY: TonCenter API Key
#
# ✅ Dashboard에서 Secrets를 설정하면 자동으로 env 객체에 바인딩됩니다
# wrangler.toml에 별도 선언 불필요 (env.TONCENTER_API_KEY로 접근 가능)

[vars]
# 공개 가능한 변수 (하드코딩)
VITE_GAME_WALLET_ADDRESS = "UQBFPDdSlPgqPrn2XwhpVq0KQExN2kv83_batQ-dptaR8Mtd"
VITE_ADMIN_WALLET_ADDRESS = "UQBFPDdSlPgqPrn2XwhpVq0KQExN2kv83_batQ-dptaR8Mtd"
VITE_CSPIN_TOKEN_ADDRESS = "EQBZ6nHfmT2wct9d4MoOdNPzhtUGXOds1y3NTmYUFHAA3uvV"
VITE_CSPIN_JETTON_WALLET = "EQAjtIvLT_y9GNBAikrD7ThH3f4BI-h_l_mz-Bhuc4_c7wOs"
VITE_TON_CONNECT_MANIFEST_URL = "https://candlespinner-workers.x00518.workers.dev/tonconnect-manifest.json"
VITE_TON_RPC_URL = "https://toncenter.com/api/v2/jsonRPC"
VITE_IS_TESTNET = "false"

