# .gitignore 학습 가이드

## 1. .gitignore란?
`프로젝트에서 Git이 추적하지 않기를 원하는 파일/폴더를 정의하는 설정 파일`

## 2. 주요 패턴 문법

### 기본 패턴
```gitignore
# 특정 파일 제외
node_modules/           # node_modules 폴더 제외
*.log                   # 모든 .log 파일 제외
.env                    # .env 파일 제외
dist/                   # dist 폴더 제외

# 특정 경로의 폴더 제외
/node_modules           # 루트의 node_modules만 제외 (하위 폴더의 node_modules는 포함)
contracts/node_modules  # contracts 폴더 내 node_modules 제외
**/node_modules         # 모든 경로의 node_modules 제외 (권장)

# 패턴 매칭
*.js                    # 모든 .js 파일 제외
test/**/*.ts            # test/ 하위의 모든 .ts 파일 제외
src/**/*.spec.ts        # src 하위의 모든 .spec.ts 파일 제외

# 제외 대상에서 특정 파일 포함 (!)
*.log                   # 모든 .log 파일 제외
!important.log          # important.log는 포함
```

## 3. CandleSpinner 프로젝트의 .gitignore 구조

### 현재 설정
```gitignore
# dependencies
/node_modules               # 루트의 node_modules/
/contracts/node_modules     # contracts/node_modules/
contracts/node_modules      # contracts의 node_modules (명시적)
**/node_modules             # 모든 경로의 node_modules (재귀)

# local env files
.env                        # 개발 환경 변수
.env.local                  # 로컬 환경 변수 (개인 설정)
.env.production.local       # 프로덕션 로컬 변수
.env.*.local                # 모든 .env.*.local 파일

# build output
/dist                       # 빌드 결과 폴더

# logs
npm-debug.log*             # npm 디버그 로그
yarn-debug.log*            # yarn 디버그 로그

# misc
.DS_Store                  # macOS 시스템 파일

# 프로젝트 특화 제외
ton-docs/                  # 분석용 다운로드 폴더
token-contract/            # 분석용 다운로드 폴더
jetton-contract/           # 분석용 다운로드 폴더
sdk/                       # 분석용 다운로드 폴더
temp_telegram_tt/          # 임시 클론 폴더

# Security
wallet-tools/.env*         # 지갑 도구의 환경 변수
*.private                  # 개인 키 파일
*.secret                   # 비밀 파일
*.key                      # 키 파일

# IDE
.idea/                     # JetBrains IDE
.vscode/settings.json      # VS Code 설정
```

## 4. 제외가 필요한 파일 종류

| 구분 | 파일 | 이유 |
|------|------|------|
| **의존성** | node_modules/ | 패키지 매니저(npm)가 자동으로 생성. 불필요한 용량 차지 (~100MB+) |
| **환경 설정** | .env, .env.local | 민감한 정보 포함 (API 키, 프라이빗 키 등) |
| **빌드 결과** | dist/, build/ | 소스에서 자동 생성 (재빌드 가능) |
| **로그 파일** | *.log, npm-debug.log | 실행 중 생성되는 임시 파일 |
| **시스템 파일** | .DS_Store, Thumbs.db | OS가 자동 생성 |
| **IDE 설정** | .vscode/, .idea/ | 개발자마다 다른 설정 |
| **비밀 키** | *.key, *.private | 보안 위협 (절대 커밋 금지) |

## 5. Git 명령어

### .gitignore 적용 확인
```bash
# 무시되는 파일 목록 확인
git check-ignore -v <filename>

# 모든 무시 패턴 확인
git status --porcelain --ignored

# 특정 패턴으로 무시되는 파일만 표시
git ls-files -o -i --exclude-standard
```

### 이미 커밋된 파일 제외하기
```bash
# 1. .gitignore에 패턴 추가
echo "node_modules/" >> .gitignore

# 2. Git 캐시에서 제거 (파일은 유지)
git rm --cached -r node_modules/

# 3. 변경사항 커밋
git commit -m "Remove node_modules from tracking"

# 4. 변경사항 푸시
git push origin main
```

## 6. CandleSpinner의 .gitignore 수정 내역

### 변경 사항
```diff
# Before
/node_modules

# After
/node_modules
/contracts/node_modules      ← 명시적으로 추가
contracts/node_modules       ← 이중 안전장치
**/node_modules              ← 모든 경로 대응
```

### 이유
1. **명시성**: contracts/node_modules 명확히 제외
2. **안전성**: 다양한 패턴으로 중복 방지
3. **미래 대비**: 새로운 서브디렉토리 자동 적용

## 7. 실제 Git 확인

```bash
# 무시된 파일 확인
cd contracts
git check-ignore -v node_modules/

# 출력: node_modules/ ../.gitignore:4:**/node_modules (일치한 패턴 출력)
```

## 8. 베스트 프래틱스

### ✅ DO
- `.gitignore`를 프로젝트 루트에 배치
- 컨벤션 사용 (node_modules/, dist/ 등)
- 환경 변수 파일 제외 (.env)
- 비밀 정보 제외 (*.key, *.private)
- 주석으로 섹션 구분

### ❌ DON'T
- `.gitignore` 자체는 커밋 (프로젝트 설정 공유 필요)
- 개인 IDE 설정은 전역 .gitignore 사용
- 패턴 없이 임의로 파일 추가
- 이미 커밋된 대용량 파일만 제외 (효과 없음)

## 9. 프로젝트별 권장 .gitignore

### Node.js/npm 프로젝트
```gitignore
node_modules/
*.log
npm-debug.log*
.npm
dist/
build/
```

### Python 프로젝트
```gitignore
__pycache__/
*.py[cod]
*$py.class
.env
venv/
```

### 모든 프로젝트
```gitignore
.env
.env.local
*.key
*.private
.DS_Store
.idea/
.vscode/settings.json
```

## 10. 확인 방법

### 커밋 전 확인
```bash
# 스테이징되지 않은 파일 (무시되어야 할 파일이 없는지 확인)
git status

# 결과: node_modules는 표시되면 안됨
```

### 커밋 후 확인
```bash
# GitHub에서 확인
# CandleSpinner 레포지토리 → Code 탭 → node_modules가 없어야 함
```

---

## 🎯 핵심 정리

1. **목적**: 불필요하고 민감한 파일을 Git 추적 대상에서 제외
2. **문법**: 패턴 매칭 (와일드카드, 경로 포함)
3. **적용**: 루트 .gitignore에 정의
4. **확인**: `git status`, `git check-ignore` 명령어 사용
5. **순서**: .gitignore 작성 → 커밋 → 푸시 (이전 파일은 `git rm --cached` 필요)
