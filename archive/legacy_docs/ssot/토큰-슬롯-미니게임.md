# 🎰 토큰 경제, 슬롯머신 룰, 미니게임

> 출처: `docs/ssot/[산출물1]프로젝트-정의서.md`

---

## 🕹️ 슬롯머신 규칙 (Slot Machine Rules)

### 🔧 기본 구성
- **릴(Reel) 수**: 3-Reel 슬롯머신  
- **심볼(Symbols)**: 이미지 대신 이모지(Emoji) 사용

### 📊 심볼 정보

| 심볼 | 명칭 | 희귀도 | 배당률 (Multiplier) | 개별 릴 확률 |
|:----:|:------|:--------:|:-------------------:|:------------:|
| ⭐   | 별     | Common   | ×0.5                | 35%          |
| 🪐   | 행성   | Common   | ×1                  | 25%          |
| ☄️   | 혜성   | Uncommon | ×2                  | 15%          |
| 🚀   | 로켓   | Uncommon | ×3                  | 10%          |
| 👽   | 외계인 | Rare     | ×5                  | 7%           |
| 💎   | 다이아몬드 | Rare | ×10                 | 5%           |
| 👑   | 왕관   | Legend   | ×20                 | 3%           |

### 💰 당첨금 계산 방식 (독창적 규칙)
- **중앙 라인**(2번째 행)에서 동일한 심볼이 **두 개 이상** 등장해야 당첨이 인정된다.
- 각 당첨 릴은 `베팅액 × 심볼 배당률`을 개별로 획득하고, 모든 릴의 당첨금을 합산한다.
- **공식:** `총 상금 = Σ(베팅액 × 배당률)` (단, 해당 릴이 매칭된 경우만)

- **예시:**  
  베팅액 **100 CSPIN**, 중앙 라인에서 '🚀'이 두 칸 등장 →  
  `(100 x 3) + (100 x 3) = 600 CSPIN`

### 🏆 잭팟(Jackpot) 규칙
- **발동 조건:** 중앙 라인의 세 심볼이 모두 동일하고, 기본 당첨금이 0보다 클 때
- **잭팟 상금:** `(3개 릴의 개별 당첨금 총합) x 100`
  
- **예시:**  
  베팅액 **100 CSPIN**, 중앙 라인에서 '🚀'이 세 칸 모두 →  
  `((100 x 3) + (100 x 3) + (100 x 3)) x 100 = 90,000 CSPIN`

### ✅ 공정성 보장
- 결과는 **서버에서 결정**
- **Provably Fair 알고리즘** 적용 → 결과의 **투명성**과 **신뢰성** 확보

---

## 🎮 미니게임: 더블업 (Double-Up)

### 🔓 발동 조건
- 슬롯머신 스핀에서 **1회라도 당첨금이 발생**하면 자동 등장

### 🎯 게임 방식
- **선택지:** 빨간색 버튼 또는 파란색 버튼
- **확률:** 성공/실패 각 **50%** (Cloudflare Worker 난수 기반)

| 결과 | 보상 |
|:-----|:-----|
| ✅ 성공 | 현재 당첨금 **×2** 획득 |
| ❌ 실패 | 현재 당첨금 **전부 소실** |

### ⚠️ 플레이 제한
- **슬롯 스핀 1회에 최대 한 번**만 시도 가능 (KV `doubleup_used:<gameId>`로 강제)
- 성공 시 당첨금 두 배, 실패 시 해당 스핀에서 얻은 당첨금을 전부 잃음

---

## 💎 토큰 경제 모델 (Tokenomics)

| 항목 | 비율 | 설명 |
|:-----|:----:|:-----|
| **RTP**<br>(Return to Player) | **약 94.7%** | `payout-calculator.calculateTheoreticalRTP()` 기준 (심볼 확률 × 배당률의 합계) |
| **하우스 엣지**<br>(House Edge) | **약 5.3%** | RTP에 기반하여 장기적인 운영 수익 모델을 확보 |

--- 

> ✨ **공정하고 투명한 게임 환경을 통해 유저와 프로젝트가 함께 성장합니다!**
