# 명령 지시서: 다단계 리팩토링 및 A/B 테스트 구현

**타임스탬프**: 2025-10-21 (v2.0.0 → v2.1.0)  
**우선순위**: 높음 (배포 후 즉시 테스트 필요)  
**관련 버전**: v2.0.0 (현재) → v2.1.0 (목표)

---

## 📋 **요청사항 요약 (9가지)**

### 1️⃣ **문서 정리**
```
- CLEANUP-REPORT.md → [보고서]_20251021_프로젝트-정리-완료.md
- MVP-TEST-CHECKLIST.md → [보고서]_20251021_MVP-테스트-체크리스트.md
- 위치: docs/reports/로 이동
```

### 2️⃣ **워크플로우 지침서 재확인**
```
- AI-워크플로우-지침서.md 검토
- 망각 현상 방지 (No Record, No Close 원칙 준수)
```

### 3️⃣ **추가 리팩토링 검토**
```
- 현재 코드베이스 분석 후 개선사항 보고
```

### 4️⃣ **Fee 조정**
```
- 입금 Fee: 100TON → 0.03TON으로 하락
- 파일: src/components/Deposit.tsx
```

### 5️⃣ **TMA 모드 설명**
```
- isTMA on/off 차이점 문서화
- UI/동작 차이 명시
```

### 6️⃣ **A/B 테스트 버튼**
```
- 입금 방식 선택 버튼 추가
  1. RPC 직접 입금 (신규)
  2. TonConnect 입금 (기존)
```

### 7️⃣ **환경변수 추가**
```
- TON_RPC_HTTPS_ENDPOINT (ankr.com)
- TON_RPC_API_KEY
- wrangler.toml, functions/ 등에 추가
```

### 8️⃣ **지갑 연결 위젯 확인**
```
- TonConnectButton이 모든 화면에서 보이는지 검증
```

### 9️⃣ **ton-docs 학습**
```
- ton-docs 폴더의 TON 스마트 컨트랙트 문법 참고
- 이후 jetton transfer 구현 시 활용
```

---

## 🎯 **실행 순서**

1. **문서 정리** (1번) → 즉시 실행
2. **워크플로우 확인** (2번) → 원칙 검증
3. **코드 분석** (3번) → 현황 파악
4. **Fee 조정** (4번) → 배포 전 필수
5. **TMA 설명** (5번) → 문서화
6. **A/B 테스트** (6번, 7번) → v2.1.0 신규 기능
7. **위젯 확인** (8번) → 사용자 경험 검증
8. **ton-docs 학습** (9번) → 배경 지식 습득

---

## ✅ **완료 조건**

- [x] 이 명령이 기록됨
- [ ] 모든 9가지 요청사항 완료
- [ ] Git 커밋 (v2.1.0 타그)
- [ ] solutions/ 해결 기록 작성
- [ ] kanban.md 업데이트
